<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>é¢„ç¼–è¯‘ä¸å˜é‡æå‡</title>
      <link href="/blog//%E9%A2%84%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87/"/>
      <url>/blog//%E9%A2%84%E7%BC%96%E8%AF%91%E4%B8%8E%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87/</url>
      
        <content type="html"><![CDATA[<h2 id="é¢„ç¼–è¯‘ä¸å˜é‡æå‡"><a href="#é¢„ç¼–è¯‘ä¸å˜é‡æå‡" class="headerlink" title="é¢„ç¼–è¯‘ä¸å˜é‡æå‡"></a><center>é¢„ç¼–è¯‘ä¸å˜é‡æå‡</center></h2><h4 id="1-JavaScriptæ‰§è¡Œä¸‰éƒ¨æ›²"><a href="#1-JavaScriptæ‰§è¡Œä¸‰éƒ¨æ›²" class="headerlink" title="1. JavaScriptæ‰§è¡Œä¸‰éƒ¨æ›²"></a>1. JavaScriptæ‰§è¡Œä¸‰éƒ¨æ›²</h4><ul><li>è¯­æ³•åˆ†æ</li><li>é¢„ç¼–è¯‘</li><li>è§£ææ‰§è¡Œ</li></ul><h4 id="2-é¢„ç¼–è¯‘"><a href="#2-é¢„ç¼–è¯‘" class="headerlink" title="2. é¢„ç¼–è¯‘"></a>2. é¢„ç¼–è¯‘</h4><ul><li>JavaScripté¢„ç¼–è¯‘å‘ç”Ÿåœ¨ä»£ç ç‰‡æ®µæ‰§è¡Œå‰ï¼Œåˆ†ä¸º<code>å…¨å±€é¢„ç¼–è¯‘ï¼ˆGO: Global Objectï¼‰</code>ã€<code>å‡½æ•°é¢„ç¼–è¯‘ï¼ˆAO: Activation Objectï¼‰</code>ï¼Œå…¨å±€é¢„ç¼–è¯‘å‘ç”Ÿåœ¨<code>script</code>æ ‡ç­¾å¼•å…¥æ‰§è¡Œæ—¶ï¼ˆå…¨å±€ä½œç”¨åŸŸï¼‰ï¼Œå‡½æ•°é¢„ç¼–è¯‘å‘ç”Ÿåœ¨å‡½æ•°æ‰§è¡Œå‰ä¸€åˆ»ï¼ˆå‡½æ•°ä½œç”¨åŸŸï¼‰ã€‚é¢„ç¼–è¯‘ä¼šåˆ›å»ºå½“å‰ç¯å¢ƒçš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</li><li>é¢„ç¼–è¯‘å‘ç”Ÿåœ¨<code>å˜é‡å£°æ˜</code>å’Œ<code>å‡½æ•°å£°æ˜</code>ï¼Œ<code>åŒ¿åå‡½æ•°</code>å’Œ<code>å‡½æ•°è¡¨è¾¾å¼</code>ä¸è¿›è¡Œé¢„ç¼–è¯‘</li></ul><h4 id="3-Imply-globalï¼ˆæš—ç¤ºå…¨å±€å˜é‡ï¼‰"><a href="#3-Imply-globalï¼ˆæš—ç¤ºå…¨å±€å˜é‡ï¼‰" class="headerlink" title="3. Imply globalï¼ˆæš—ç¤ºå…¨å±€å˜é‡ï¼‰"></a>3. Imply globalï¼ˆæš—ç¤ºå…¨å±€å˜é‡ï¼‰</h4><p>  ä»»ä½•å˜é‡æœªç»å£°æ˜å°±èµ‹å€¼ï¼Œæ­¤å˜é‡å°±å˜ä¸º<code>å…¨å±€å¯¹è±¡ï¼ˆwindowï¼ŒglobalThisï¼‰</code>æ‰€æœ‰</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span> () &#123; a = <span class="number">2</span> &#125;</span><br><span class="line"><span class="title function_">fn</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><h4 id="4-å…¨å±€é¢„ç¼–è¯‘"><a href="#4-å…¨å±€é¢„ç¼–è¯‘" class="headerlink" title="4. å…¨å±€é¢„ç¼–è¯‘"></a>4. å…¨å±€é¢„ç¼–è¯‘</h4><ul><li>åˆ›å»º<code>GOï¼ˆGlobal Objectï¼‰</code></li><li>æ‰¾å˜é‡å£°æ˜ï¼Œå°†å˜é‡å£°æ˜ä½œä¸º<code>GO</code>å¯¹è±¡çš„å±æ€§åï¼Œèµ‹å€¼<code>undefined</code>ï¼ˆé’ˆå¯¹<code>var</code>ï¼Œ<code>let</code>ã€<code>const</code>å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼‰</li><li>æ‰¾å…¨å±€å‡½æ•°å£°æ˜ï¼Œå°†å‡½æ•°åä½œä¸º<code>GO</code>å¯¹è±¡çš„å±æ€§åï¼Œèµ‹å€¼<code>å‡½æ•°ä½“</code>ï¼ˆä¼˜å…ˆçº§ï¼šå‡½æ•°å£°æ˜ &gt; å˜é‡å£°æ˜ï¼‰</li></ul><h4 id="5-å…¨å±€é¢„ç¼–è¯‘è¿‡ç¨‹"><a href="#5-å…¨å±€é¢„ç¼–è¯‘è¿‡ç¨‹" class="headerlink" title="5. å…¨å±€é¢„ç¼–è¯‘è¿‡ç¨‹"></a>5. å…¨å±€é¢„ç¼–è¯‘è¿‡ç¨‹</h4><ul><li><p>æ¡ˆä¾‹</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>, y = z = <span class="number">0</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span> (n) &#123;</span><br><span class="line">  <span class="keyword">return</span> n + <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">y = <span class="title function_">add</span>(x)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span> (n) &#123;</span><br><span class="line">  <span class="keyword">return</span> n + <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line">z = <span class="title function_">add</span>(x)</span><br></pre></td></tr></table></figure></li></ul><ol><li><p>åˆ›å»º<code>GO</code></p></li><li><p>æ‰¾å˜é‡å£°æ˜ï¼Œå°†å˜é‡å£°æ˜ä½œä¸º<code>GO</code>å¯¹è±¡çš„å±æ€§åï¼Œèµ‹å€¼<code>undefined</code>ï¼ˆé’ˆå¯¹<code>var</code>ï¼Œ<code>let</code>ã€<code>const</code>å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼‰</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Go</span>&#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="literal">undefined</span></span><br><span class="line">    <span class="attr">y</span>: <span class="literal">undefined</span></span><br><span class="line">    <span class="attr">z</span>: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ‰¾å…¨å±€å‡½æ•°å£°æ˜ï¼Œå°†å‡½æ•°åä½œä¸º<code>GO</code>å¯¹è±¡çš„å±æ€§åï¼Œèµ‹å€¼<code>å‡½æ•°ä½“</code></p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">GO</span>&#123;</span><br><span class="line">   <span class="attr">x</span>: <span class="literal">undefined</span></span><br><span class="line">   <span class="attr">y</span>: <span class="literal">undefined</span></span><br><span class="line">   <span class="attr">z</span>: <span class="literal">undefined</span></span><br><span class="line">   <span class="attr">add</span>: <span class="keyword">function</span> <span class="title function_">add</span> (n) &#123; <span class="keyword">return</span> n + <span class="number">1</span> &#125; =&gt; <span class="keyword">function</span> <span class="title function_">add</span> (n) &#123; <span class="keyword">return</span> n + <span class="number">3</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="6-å‡½æ•°é¢„ç¼–è¯‘"><a href="#6-å‡½æ•°é¢„ç¼–è¯‘" class="headerlink" title="6. å‡½æ•°é¢„ç¼–è¯‘"></a>6. å‡½æ•°é¢„ç¼–è¯‘</h4><ul><li>åˆ›å»º<code>AOï¼ˆActivation Objectï¼‰</code></li><li>æ‰¾å½¢å‚å’Œå˜é‡å£°æ˜ï¼Œå°†å˜é‡å’Œå½¢å‚åä½œä¸º<code>AO</code>å¯¹è±¡çš„å±æ€§åï¼Œèµ‹å€¼<code>undefined</code>ï¼ˆé’ˆå¯¹<code>var</code>ï¼Œ<code>let</code>ã€<code>const</code>å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼‰</li><li>å°†å®å‚å€¼ä¸å½¢å‚ç»Ÿä¸€</li><li>æ‰¾å‡½æ•°å£°æ˜ï¼Œå°†å‡½æ•°åä½œä¸º<code>AO</code>å¯¹è±¡çš„å±æ€§åï¼Œèµ‹å€¼<code>å‡½æ•°ä½“</code>ï¼ˆä¼˜å…ˆçº§ï¼šå‡½æ•°å£°æ˜ &gt; å®å‚ &gt; å˜é‡å£°æ˜ï¼‰</li></ul><h4 id="7-å‡½æ•°é¢„ç¼–è¯‘è¿‡ç¨‹"><a href="#7-å‡½æ•°é¢„ç¼–è¯‘è¿‡ç¨‹" class="headerlink" title="7. å‡½æ•°é¢„ç¼–è¯‘è¿‡ç¨‹"></a>7. å‡½æ•°é¢„ç¼–è¯‘è¿‡ç¨‹</h4><ul><li><p>æ¡ˆä¾‹</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">a</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">123</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> b = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(b)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">d</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="title function_">fn</span>(<span class="number">1</span>)</span><br></pre></td></tr></table></figure></li></ul><ol><li><p>åˆ›å»º<code>AO</code></p></li><li><p>æ‰¾å½¢å‚å’Œå˜é‡å£°æ˜ï¼Œå°†å˜é‡å’Œå½¢å‚åä½œä¸º<code>AO</code>å¯¹è±¡çš„å±æ€§åï¼Œèµ‹å€¼<code>undefined</code>ï¼ˆé’ˆå¯¹<code>var</code>ï¼Œ<code>let</code>ã€<code>const</code>å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼‰</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">AO</span>&#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="literal">undefined</span>,</span><br><span class="line">    <span class="attr">b</span>: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å°†å®å‚å€¼ä¸å½¢å‚ç»Ÿä¸€</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">AO</span>&#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">b</span>: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ‰¾å‡½æ•°å£°æ˜ï¼Œå°†å‡½æ•°åä½œä¸º<code>AO</code>å¯¹è±¡çš„å±æ€§åï¼Œèµ‹å€¼<code>å‡½æ•°ä½“</code></p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">AO</span>&#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">    <span class="attr">b</span>: <span class="literal">undefined</span></span><br><span class="line">    <span class="attr">d</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="8-å˜é‡æå‡ï¼ˆHoistingï¼‰"><a href="#8-å˜é‡æå‡ï¼ˆHoistingï¼‰" class="headerlink" title="8. å˜é‡æå‡ï¼ˆHoistingï¼‰"></a>8. å˜é‡æå‡ï¼ˆ<code>Hoisting</code>ï¼‰</h4><p>  åœ¨é¢„ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œ<code>å˜é‡å£°æ˜</code>ï¼Œ<code>å‡½æ•°å£°æ˜</code>ä¼šè¢«ç§»åˆ°è°ƒç”¨å‰ï¼Œä»è€Œäº§ç”Ÿ<code>å˜é‡æå‡</code></p><ul><li><p><code>å‡½æ•°å£°æ˜</code>æ•´ä½“æå‡ï¼Œæ— è®ºå‡½æ•°è°ƒç”¨å’Œå£°æ˜çš„ä½ç½®æ˜¯å‰æ˜¯åï¼Œæ€»ä¼šè¢«å‡½æ•°å£°æ˜ç§»åˆ°è°ƒç”¨å‰ï¼Œå‡½æ•°åä¸å½¢å‚æˆ–å˜é‡ååŒåæ—¶ï¼š<code>å‡½æ•°å£°æ˜</code> &gt; <code>å®å‚</code> &gt; <code>å˜é‡å£°æ˜</code></p></li><li><p><code>åŒ¿åå‡½æ•°</code>å’Œ<code>å‡½æ•°è¡¨è¾¾å¼</code>ä¸ä¼šæå‡</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(bar) <span class="comment">// undefined: å˜é‡æç¤º</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = <span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(bar) <span class="comment">// function foo() &#123;&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">foo</span>()) <span class="comment">// not defined: å‡½æ•°è¡¨è¾¾å¼ä¸ä¼šæå‡</span></span><br></pre></td></tr></table></figure></li><li><p><code>å˜é‡å£°æ˜</code>æå‡ï¼Œæ— è®ºå˜é‡è°ƒç”¨å’Œå£°æ˜çš„ä½ç½®æ˜¯å‰æ˜¯åï¼Œç³»ç»Ÿæ€»ä¼šæŠŠå£°æ˜ç§»åˆ°è°ƒç”¨å‰ï¼Œèµ‹å€¼<code>undefined</code>ï¼ˆé’ˆå¯¹<code>var</code>ï¼Œ<code>let</code>ã€<code>const</code>å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼‰</p></li><li><p><code>var</code>ï¼š<code>åˆ›å»º</code>å’Œ<code>åˆå§‹åŒ–</code>éƒ½è¢«æå‡</p></li><li><p><code>function</code>ï¼šæ•´ä½“æå‡ï¼Œ<code>åˆ›å»º</code>ã€<code>åˆå§‹åŒ–</code>ã€<code>èµ‹å€¼</code>éƒ½æå‡</p></li><li><p><code>let</code>ã€<code>const</code>ï¼š<code>åˆ›å»º</code>æå‡ï¼ˆå³å˜é‡å·²å­˜åœ¨ï¼Œä½†åªæœ‰ç­‰åˆ°å˜é‡å£°æ˜è¯­å¥æ‰§è¡Œåæ‰èƒ½ä½¿ç”¨ï¼‰</p></li><li><p>ES6 <code>import</code>å…·æœ‰æå‡æ•ˆæœï¼Œå¯¼å…¥æ¨¡å—ä¼šæå‡åˆ°æ•´ä¸ªæ¨¡å—çš„å¤´éƒ¨ï¼Œé¦–å…ˆæ‰§è¡Œï¼ˆ<code>import</code>é™æ€ç¼–è¯‘ï¼Œ<code>import()</code>ï¼Œ<code>require()</code>åŠ¨æ€åŠ è½½ï¼‰</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">foo</span>()</span><br><span class="line"><span class="keyword">import</span> &#123; foo &#125; <span class="keyword">from</span> <span class="string">&#x27;module&#x27;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="9-æš‚æ—¶æ€§æ­»åŒºï¼ˆTemporal-dead-zoneï¼Œç®€ç§°TDZï¼‰"><a href="#9-æš‚æ—¶æ€§æ­»åŒºï¼ˆTemporal-dead-zoneï¼Œç®€ç§°TDZï¼‰" class="headerlink" title="9. æš‚æ—¶æ€§æ­»åŒºï¼ˆTemporal dead zoneï¼Œç®€ç§°TDZï¼‰"></a>9. æš‚æ—¶æ€§æ­»åŒºï¼ˆTemporal dead zoneï¼Œç®€ç§°TDZï¼‰</h4><p>  <code>æš‚æ—¶æ€§æ­»åŒº</code>æœ¬è´¨æ˜¯ï¼Œåªè¦ä¸€è¿›å…¥å½“å‰ä½œç”¨åŸŸï¼Œæ‰€è¦ä½¿ç”¨çš„å˜é‡å°±å·²ç»å­˜åœ¨äº†ï¼Œä½†æ˜¯ä¸å¯è·å–ï¼Œåªæœ‰ç­‰åˆ°å˜é‡å£°æ˜è¯­å¥æ‰§è¡Œåï¼Œæ‰å¯ä»¥è·å–å’Œä½¿ç”¨è¯¥å˜é‡</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// typeof æ­»åŒºé™·é˜±</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> x <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> x</span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> z <span class="comment">// Reference Error</span></span><br><span class="line"><span class="keyword">let</span> z</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Surrogate Pair</title>
      <link href="/blog//Surrogate-Pair/"/>
      <url>/blog//Surrogate-Pair/</url>
      
        <content type="html"><![CDATA[<h2 id="Surrogate-Pair"><a href="#Surrogate-Pair" class="headerlink" title="Surrogate Pair"></a><center>Surrogate Pair</center></h2><p>  ä»€ä¹ˆæ˜¯<code>Surrogate Pair</code>å‘¢ï¼Ÿåœ¨æˆ‘äº†è§£åˆ°å®ƒçš„æ—¶å€™ï¼Œæˆ‘åªæ˜¯åœ¨Googleæœç´¢â€<code>å¦‚ä½•åœ¨JavaScriptä¸­è·å–å­—ç¬¦ä¸²çš„æœ€åä¸€ä½</code>â€œï¼Œäºæ˜¯æˆ‘å¾—åˆ°äº†ä¸‹é¢å‡ ç§æ–¹å¼ï¼Œå…ˆè®©æˆ‘ä»¬çœ‹çœ‹è¿™å‡ ç§æ–¹å¼</p><h4 id="è·å–å­—ç¬¦ä¸²çš„æœ€åä¸€ä½çš„å‡ ç§æ–¹å¼"><a href="#è·å–å­—ç¬¦ä¸²çš„æœ€åä¸€ä½çš„å‡ ç§æ–¹å¼" class="headerlink" title="è·å–å­—ç¬¦ä¸²çš„æœ€åä¸€ä½çš„å‡ ç§æ–¹å¼"></a>è·å–å­—ç¬¦ä¸²çš„æœ€åä¸€ä½çš„å‡ ç§æ–¹å¼</h4><ul><li><p>substringã€substr</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str.<span class="title function_">substr</span>(str.<span class="property">length</span> - <span class="number">1</span>)</span><br><span class="line">str.<span class="title function_">substring</span>(str.<span class="property">length</span> - <span class="number">1</span>)</span><br></pre></td></tr></table></figure></li><li><p>charAt</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str.<span class="title function_">charAt</span>(str.<span class="property">length</span> - <span class="number">1</span>)</span><br></pre></td></tr></table></figure></li><li><p>split</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>)[str.<span class="property">length</span> - <span class="number">1</span>]</span><br></pre></td></tr></table></figure></li><li><p>æ­£åˆ™è¡¨è¾¾å¼</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str.<span class="title function_">match</span>(<span class="regexp">/.$/</span>).<span class="title function_">pop</span>()</span><br></pre></td></tr></table></figure></li><li><p>Array.from()</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(str).<span class="title function_">pop</span>()</span><br></pre></td></tr></table></figure></li><li><p>Spread</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[...str].<span class="title function_">pop</span>()</span><br></pre></td></tr></table></figure></li></ul><h4 id="å‡ ç§æ–¹å¼å¤„ç†å­—ç¬¦ä¸²"><a href="#å‡ ç§æ–¹å¼å¤„ç†å­—ç¬¦ä¸²" class="headerlink" title="å‡ ç§æ–¹å¼å¤„ç†å­—ç¬¦ä¸²"></a>å‡ ç§æ–¹å¼å¤„ç†å­—ç¬¦ä¸²</h4><p>  ä»¥ä¸Šå‡ ç§æ–¹å¼å¤„ç†å­—ç¬¦ä¸²æ­£å¸¸æƒ…å†µä¸‹ï¼ˆå¦‚è‹±æ–‡å­—ç¬¦ä¸²ï¼‰éƒ½æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹æ‰§è¡Œç»“æœ<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;example&#x27;</span></span><br><span class="line">str.<span class="title function_">substr</span>(str.<span class="property">length</span> - <span class="number">1</span>) <span class="comment">// &#x27;e&#x27;</span></span><br><span class="line">str.<span class="title function_">substring</span>(str.<span class="property">length</span> - <span class="number">1</span>) <span class="comment">// &#x27;e&#x27;</span></span><br><span class="line">str.<span class="title function_">charAt</span>(str.<span class="property">length</span> - <span class="number">1</span>) <span class="comment">// &#x27;e&#x27;</span></span><br><span class="line">str.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>)[str.<span class="property">length</span> - <span class="number">1</span>] <span class="comment">// &#x27;e&#x27;</span></span><br><span class="line">str.<span class="title function_">match</span>(<span class="regexp">/.$/</span>).<span class="title function_">pop</span>() <span class="comment">// &#x27;e&#x27;</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(str).<span class="title function_">pop</span>() <span class="comment">// &#x27;e&#x27;</span></span><br><span class="line">[...str].<span class="title function_">pop</span>() <span class="comment">// &#x27;e&#x27;</span></span><br></pre></td></tr></table></figure><br>  æ‰€æœ‰æ–¹å¼éƒ½èƒ½æ­£ç¡®è·å–å­—ç¬¦ä¸²çš„æœ€åä¸€ä½ï¼Œä½†å½“æˆ‘ä»¬æˆ‘ä»¬å­—ç¬¦ä¸²ä¸­å‡ºç°<code>Surrogate Pair</code>æ—¶ï¼ˆæ¯”å¦‚emojiï¼‰ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆ<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;exampleğŸ’©&#x27;</span></span><br><span class="line">str.<span class="title function_">substr</span>(str.<span class="property">length</span> - <span class="number">1</span>) <span class="comment">// &#x27;\uDCA9&#x27;</span></span><br><span class="line">str.<span class="title function_">substring</span>(str.<span class="property">length</span> - <span class="number">1</span>) <span class="comment">// &#x27;\uDCA9&#x27;</span></span><br><span class="line">str.<span class="title function_">charAt</span>(str.<span class="property">length</span> - <span class="number">1</span>) <span class="comment">// &#x27;\uDCA9&#x27;</span></span><br><span class="line">str.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>)[str.<span class="property">length</span> - <span class="number">1</span>] <span class="comment">// &#x27;\uDCA9&#x27;</span></span><br><span class="line">str.<span class="title function_">match</span>(<span class="regexp">/.$/</span>).<span class="title function_">pop</span>() <span class="comment">// &#x27;\uDCA9&#x27;</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(str).<span class="title function_">pop</span>() <span class="comment">// &#x27;ğŸ’©&#x27;</span></span><br><span class="line">[...str].<span class="title function_">pop</span>() <span class="comment">// &#x27;ğŸ’©&#x27;</span></span><br></pre></td></tr></table></figure><br>  è¿™ä¸ªç»“æœè®©æ˜¯å¦è®©ä½ æ„Ÿåˆ°è´¹è§£ï¼Ÿæ¥ä¸‹æ¥è®©æˆ‘ä»¬äº†è§£ä¸€ä¸‹åŸå› å§</p><h4 id="Surrogate-Pair-1"><a href="#Surrogate-Pair-1" class="headerlink" title="Surrogate Pair"></a>Surrogate Pair</h4><ul><li><p>ä»€ä¹ˆæ˜¯Surrogate Pair</p><p>åœ¨Unicodeå­—ç¬¦é›†ä¸­ï¼Œæœ‰ä¸€äº›å­—ç¬¦çš„ç ç‚¹éœ€è¦è¶…è¿‡16ä½æ‰èƒ½è¡¨ç¤ºã€‚å› æ­¤ï¼ŒUnicodeå®šä¹‰äº†ä¸€ç§æœºåˆ¶ï¼Œç”¨äºå°†è¿™äº›å­—ç¬¦åˆ†æˆä¸¤ä¸ª16ä½ç¼–ç å•å…ƒã€‚è¿™äº›ç¼–ç å•å…ƒè¢«ç§°ä¸ºä»£ç†é¡¹ï¼ˆSurrogateï¼‰ã€‚ä¸€ä¸ªä»£ç†é¡¹ç”±ä¸¤ä¸ªç¼–ç å•å…ƒç»„æˆï¼šé«˜ä»£ç†é¡¹å’Œä½ä»£ç†é¡¹ã€‚é«˜ä»£ç†é¡¹çš„ç¼–ç å•å…ƒåœ¨èŒƒå›´0xD800åˆ°0xDBFFä¹‹é—´ï¼Œè€Œä½ä»£ç†é¡¹çš„ç¼–ç å•å…ƒåœ¨èŒƒå›´0xDC00åˆ°0xDFFFä¹‹é—´</p><p>ä¾‹å¦‚ï¼Œè¡¨æƒ…ç¬¦å·ğŸ˜€ï¼ˆU+1F600ï¼‰æ˜¯ç”±ä¸¤ä¸ªç¼–ç å•å…ƒç»„æˆçš„ä»£ç†å¯¹è¡¨ç¤ºçš„ã€‚é«˜ä»£ç†é¡¹ä¸º0xD83Dï¼Œä½ä»£ç†é¡¹ä¸º0xDE00ã€‚è¿™ä¸¤ä¸ªç¼–ç å•å…ƒç»„æˆçš„ä»£ç†å¯¹è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªå•ä¸ªçš„Unicodeå­—ç¬¦</p></li><li><p>JavaScriptä¸­çš„Surrogate Pair</p><p>JavaScriptä½¿ç”¨UTF-16ç¼–ç ï¼Œå½“JavaScripté‡åˆ°ä»£ç†å¯¹æ—¶ï¼Œå®ƒå°†å…¶è§£é‡Šä¸ºä¸¤ä¸ªå•ç‹¬çš„å­—ç¬¦ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œè¿™æ„å‘³ç€ï¼Œå¦‚æœæ‚¨æ­£åœ¨å¤„ç†åŒ…å«ä»£ç†å¯¹çš„å­—ç¬¦ä¸²ï¼Œæ‚¨éœ€è¦è€ƒè™‘åˆ°è¿™äº›ç‰¹æ®Šå­—ç¬¦ï¼Œä»¥ç¡®ä¿æ­£ç¡®å¤„ç†å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦</p><p>åœ¨å¤„ç†åŒ…å«ä»£ç†å¯¹çš„å­—ç¬¦ä¸²æ—¶ï¼Œéœ€è¦æ³¨æ„å­—ç¬¦ä¸²çš„é•¿åº¦å’Œç´¢å¼•ã€‚ç”±äºä»£ç†å¯¹æ˜¯ç”±ä¸¤ä¸ª16ä½ç¼–ç å•å…ƒç»„æˆçš„ï¼Œæ‰€ä»¥å½“ä»£ç†å¯¹å‡ºç°åœ¨å­—ç¬¦ä¸²ä¸­æ—¶ï¼Œè¯¥å­—ç¬¦ä¸²çš„é•¿åº¦å°†å¢åŠ 2è€Œä¸æ˜¯1</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;ğŸ’©&#x27;</span>.<span class="property">length</span> <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>æ­¤å¤–ï¼Œåœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ç´¢å¼•è®¿é—®ä»£ç†å¯¹æ—¶éœ€è¦æ³¨æ„ã€‚å› ä¸ºä»£ç†å¯¹çš„ç¬¬ä¸€ä¸ªç¼–ç å•å…ƒåœ¨å­—ç¬¦ä¸²ä¸­çš„ç´¢å¼•ä½ç½®å¿…é¡»æ˜¯å¶æ•°ï¼Œè€Œç¬¬äºŒä¸ªç¼–ç å•å…ƒåœ¨å­—ç¬¦ä¸²ä¸­çš„ç´¢å¼•ä½ç½®å¿…é¡»æ˜¯å¥‡æ•°</p><p>å› æ­¤ï¼Œåœ¨ä½¿ç”¨ä»¥ä¸Šå‡ ç§æ–¹å¼å¤„ç†<code>Surrogate Pair</code>æ—¶ï¼Œä¸€äº›æ–¹æ³•ä¸èƒ½æ­£ç¡®è¿›è¡Œå¤„ç†</p></li></ul><h4 id="å¦‚ä½•æ­£ç¡®å¤„ç†Surrogate-Pairï¼Ÿ"><a href="#å¦‚ä½•æ­£ç¡®å¤„ç†Surrogate-Pairï¼Ÿ" class="headerlink" title="å¦‚ä½•æ­£ç¡®å¤„ç†Surrogate Pairï¼Ÿ"></a>å¦‚ä½•æ­£ç¡®å¤„ç†<code>Surrogate Pair</code>ï¼Ÿ</h4><p>  åœ¨ä¸Šé¢çš„å‡ ç§æ–¹å¼ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿçœ‹åˆ°äº†å¦‚ä½•æ­£ç¡®å¤„ç†<code>Surrogate Pair</code></p><ul><li><p>Array.from()</p><p>ä½¿ç”¨Array.from()èƒ½æ­£ç¡®çš„å°†æ‰€æœ‰å­—ç¬¦ä¸²æŒ‰ç…§ä½ æƒ³è¦çš„æ–¹å¼å¤„ç†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;ğŸ˜€helloğŸ’©&#x27;</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(str) <span class="comment">// [&#x27;ğŸ˜€&#x27;, &#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;, &#x27;ğŸ’©&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p>Spread<br>åŒæ ·ä½¿ç”¨Spread(æ‰©å±•è¿ç®—ç¬¦)ä¹Ÿèƒ½è¿›è¡Œå¤„ç†</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;ğŸ˜€helloğŸ’©&#x27;</span></span><br><span class="line">[...str] <span class="comment">// [&#x27;ğŸ˜€&#x27;, &#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;, &#x27;ğŸ’©&#x27;]</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>  <code>Surrogate Pair</code>æ˜¯Unicodeå­—ç¬¦é›†ä¸­çš„ä¸€äº›å­—ç¬¦ï¼Œç”±äºå…¶ç ç‚¹è¶…è¿‡äº†16ä½ï¼Œå› æ­¤è¢«æ‹†åˆ†ä¸ºä¸¤ä¸ª16ä½ç¼–ç å•å…ƒã€‚åœ¨JavaScriptä¸­ï¼Œç”±äºå­—ç¬¦ä¸²æ˜¯UTF-16ç¼–ç ï¼Œå› æ­¤ä»£ç†å¯¹è¢«è§£é‡Šä¸ºä¸¤ä¸ªå•ç‹¬çš„å­—ç¬¦ã€‚åœ¨å¤„ç†åŒ…å«ä»£ç†å¯¹çš„å­—ç¬¦ä¸²æ—¶ï¼Œéœ€è¦æ³¨æ„å­—ç¬¦ä¸²çš„é•¿åº¦å’Œç´¢å¼•</p>]]></content>
      
      
      <categories>
          
          <category> Typescript </category>
          
          <category> JavaScript </category>
          
          <category> Unicode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Typescript </tag>
            
            <tag> Unicode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Type &#39;string&#39; is not assignable to type in TypeScript</title>
      <link href="/blog//Type-string-is-not-assignable-to-type-in-TypeScript/"/>
      <url>/blog//Type-string-is-not-assignable-to-type-in-TypeScript/</url>
      
        <content type="html"><![CDATA[<h2 id="Type-â€˜stringâ€™-is-not-assignable-to-type-in-Typescript"><a href="#Type-â€˜stringâ€™-is-not-assignable-to-type-in-Typescript" class="headerlink" title="Type â€˜stringâ€™ is not assignable to type in Typescript"></a><center>Type â€˜stringâ€™ is not assignable to type in Typescript</center></h2><h4 id="Type-â€˜stringâ€™-is-not-assignable-to-type-in-Typescript-1"><a href="#Type-â€˜stringâ€™-is-not-assignable-to-type-in-Typescript-1" class="headerlink" title="Type â€˜stringâ€™ is not assignable to type in Typescript"></a>Type â€˜stringâ€™ is not assignable to type in Typescript</h4><p>  å½“<code>Typescript</code>å‡ºç°<code>&quot;Type &#39;string&#39; is not assignable to type&quot;</code>é”™è¯¯æ—¶ï¼Œä¸€èˆ¬æƒ…å†µæ˜¯æˆ‘ä»¬å°†<code>string</code>ç±»å‹åˆ†é…ç»™äº†çœ‹èµ·æ¥æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå…¶å®å¹¶ä¸æ˜¯å®Œæ•´çš„å­—ç¬¦ä¸²ç±»å‹ã€‚å¦‚<code>literal type(å­—é¢é‡)</code>æˆ–è€…<code>enum(æšä¸¾)</code><br>  <br /><br>  è§£å†³è¿™ä¸ªé—®é¢˜å…¶å®æ¯”è¾ƒç®€å•ï¼Œä½¿ç”¨å¸¸é‡(const)å®šä¹‰æˆ–è€…ç±»å‹æ–­è¨€</p><p>  å¦‚:<br>  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PrimaryColor</span> = <span class="string">&#x27;red&#x27;</span> | <span class="string">&#x27;yellow&#x27;</span> | <span class="string">&#x27;green&#x27;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">// yellow: string</span></span><br><span class="line"><span class="keyword">let</span> yellow = <span class="string">&#x27;yellow&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Type &#x27;string&#x27; is not assignable to type &#x27;PrimaryColor&#x27;.</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">current</span>: <span class="title class_">PrimaryColor</span> = yellow</span><br></pre></td></tr></table></figure></p><p>  åœ¨ä¸Šä¾‹ä¸­ï¼Œå˜é‡<code>yellow</code>ç±»å‹ä¸º<code>string</code>,è€Œ<code>current</code>ç±»å‹ä¸º<code>PrimaryColor</code>ã€‚å½“æˆ‘ä»¬å°†<code>string</code>åˆ†é…ç»™<code>PrimaryColor</code>æ—¶å°±ä¼šå‡ºç°æ­¤é”™è¯¯ï¼Œè¿™æ˜¯å› ä¸ºï¼Œè™½ç„¶<code>yellow</code>å˜é‡çš„å€¼ä¸º<code>PrimaryColor</code>å…¶ä¸­ä¹‹ä¸€ï¼Œä½†æ˜¯å®ƒæ˜¯<code>string</code>ç±»å‹ï¼Œå¯¹<code>PrimaryColor</code>æ¥è¯´å¤ªè¿‡å¹¿æ³›</p><p>  æ¢å¥è¯æ¥è¯´ï¼Œ<code>PrimaryColor</code>åªå­˜åœ¨ä¸‰ä¸ªå€¼<code>&#39;red&#39;</code>ã€<code>&#39;yellow&#39;</code>ã€<code>&#39;green&#39;</code>ï¼Œè€Œstringç±»å‹å¯ä»¥ä¸ºä»»æ„å­—ç¬¦ä¸²</p><p>  è§£å†³åŠæ³•ï¼š</p><ul><li><p>ç±»å‹æ–­è¨€(type assertion)</p><p>å¦‚ä¸Šä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€å°†<code>yellow</code>æ–­è¨€ä¸º<code>PrimaryColor</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PrimaryColor</span> = <span class="string">&#x27;red&#x27;</span> | <span class="string">&#x27;yellow&#x27;</span> | <span class="string">&#x27;green&#x27;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">// yellow: PrimaryColor</span></span><br><span class="line"><span class="keyword">let</span> yellow = <span class="string">&#x27;yellow&#x27;</span> <span class="keyword">as</span> <span class="title class_">PrimaryColor</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">current</span>: <span class="title class_">PrimaryColor</span> = yellow</span><br></pre></td></tr></table></figure></li><li><p>constæ–­è¨€(const assertion)</p><p>ä½¿ç”¨const assertionå°†å˜é‡<code>yellow</code>æ–­è¨€ä¸ºå­—ç¬¦ä¸²å­—é¢é‡<code>&#39;yellow&#39;</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PrimaryColor</span> = <span class="string">&#x27;red&#x27;</span> | <span class="string">&#x27;yellow&#x27;</span> | <span class="string">&#x27;green&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// yellow: &#x27;yellow&#x27;</span></span><br><span class="line"><span class="keyword">let</span> yellow = <span class="string">&#x27;yellow&#x27;</span> <span class="keyword">as</span> <span class="keyword">const</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">current</span>: <span class="title class_">PrimaryColor</span> = yellow</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨constå®šä¹‰</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PrimaryColor</span> = <span class="string">&#x27;red&#x27;</span> | <span class="string">&#x27;yellow&#x27;</span> | <span class="string">&#x27;green&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// yellow: &#x27;yellow&#x27;</span></span><br><span class="line"><span class="keyword">const</span> yellow = <span class="string">&#x27;yellow&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">current</span>: <span class="title class_">PrimaryColor</span> = yellow</span><br></pre></td></tr></table></figure></li></ul><p>  ä¸€äº›å…¶ä»–æƒ…å†µ</p><ul><li><p>æ¥ä¸‹æ¥çœ‹çœ‹å¦å¤–ä¸€ä¸ªä¾‹å­</p>  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Letter</span> = <span class="string">&#x27;a&#x27;</span> | <span class="string">&#x27;b&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">arr</span>: <span class="title class_">Letter</span>[] = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">obj</span>: &#123; <span class="attr">letter</span>: <span class="built_in">string</span> &#125; = &#123;</span><br><span class="line">  <span class="attr">letter</span>: <span class="string">&#x27;a&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Argument of type &#x27;string&#x27; is not assignable to parameter of type &#x27;Letter&#x27;.</span></span><br><span class="line">arr.<span class="title function_">push</span>(obj.<span class="property">letter</span>)</span><br></pre></td></tr></table></figure><p>å› ä¸ºæ•°ç»„<code>arr</code>ç±»å‹ä¸º<code>Letter[]</code>,è€Œ<code>obj.letter</code>ç±»å‹ä¸º<code>string</code>,å› æ­¤å‘ç”Ÿé”™è¯¯ã€‚</p><p>è§£å†³åŠæ³•ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Letter</span> = <span class="string">&#x27;a&#x27;</span> | <span class="string">&#x27;b&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">arr</span>: <span class="title class_">Letter</span>[] = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">obj</span>: &#123; <span class="attr">letter</span>: <span class="built_in">string</span> &#125; = &#123;</span><br><span class="line">  <span class="attr">letter</span>: <span class="string">&#x27;a&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// type assertion</span></span><br><span class="line">arr.<span class="title function_">push</span>(obj.<span class="property">letter</span> <span class="keyword">as</span> <span class="title class_">Letter</span>)</span><br></pre></td></tr></table></figure><p>å¦‚æœå¯ä»¥ï¼Œæœ€å¥½å°†<code>obj.letter</code>åœ¨å®šä¹‰æ—¶ç›´æ¥å®šä¹‰ä¸º<code>Letter</code>ç±»å‹</p></li><li><p>è¿˜æœ‰ä¸€ä¸ªä¾‹å­</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PrimaryColor</span> = <span class="string">&#x27;red&#x27;</span> | <span class="string">&#x27;yellow&#x27;</span> | <span class="string">&#x27;green&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// arr2: string[]</span></span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="string">&#x27;yellow&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">arr3</span>: <span class="title class_">PrimaryColor</span>[] = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;green&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// Type &#x27;string[]&#x27; is not assignable to type &#x27;PrimaryColor[]&#x27;.</span></span><br><span class="line"><span class="comment">// Type &#x27;string&#x27; is not assignable to type &#x27;PrimaryColor&#x27;.</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">arr4</span>: <span class="title class_">PrimaryColor</span>[] = [...arr2, ...arr3]</span><br></pre></td></tr></table></figure><p>åŸå› æ˜¯<code>arr2</code>ç±»å‹ä¸º<code>string[]</code>ï¼Œä¸èƒ½å°†å…¶èµ‹å€¼ç»™<code>PrimaryColor[]</code>ï¼Œå¯ä»¥ä½¿ç”¨<code>const assertion</code>è§£å†³</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PrimaryColor</span> = <span class="string">&#x27;red&#x27;</span> | <span class="string">&#x27;yellow&#x27;</span> | <span class="string">&#x27;green&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// arr2: readonly [&quot;yellow&quot;]</span></span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="string">&#x27;yellow&#x27;</span>] <span class="keyword">as</span> <span class="keyword">const</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">arr3</span>: <span class="title class_">PrimaryColor</span>[] = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;green&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">arr4</span>: <span class="title class_">PrimaryColor</span>[] = [...arr2, ...arr3]</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯<code>const assertion</code>ä¼šå°†æ•°ç»„è½¬åŒ–ä¸ºåªè¯»å…ƒç»„ç±»å‹ï¼Œå¦‚æœä½ åç»­æƒ³è¦ä¿®æ”¹æ•°ç»„ä¸­çš„ç±»å‹å°†ä¼šå‘ç”Ÿé”™è¯¯ï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•ä¸é€‚åˆæ•°ç»„éœ€è¦ä¿®æ”¹çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨<code>type assertion</code>è§£å†³</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PrimaryColor</span> = <span class="string">&#x27;red&#x27;</span> | <span class="string">&#x27;yellow&#x27;</span> | <span class="string">&#x27;green&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// arr2: PrimaryColor[]</span></span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="string">&#x27;yellow&#x27;</span>] <span class="keyword">as</span> <span class="title class_">PrimaryColor</span>[]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">arr3</span>: <span class="title class_">PrimaryColor</span>[] = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;green&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">arr4</span>: <span class="title class_">PrimaryColor</span>[] = [...arr2, ...arr3]</span><br></pre></td></tr></table></figure></li></ul><h4 id="Type-string-is-not-assignable-to-type-Enum-in-Typescript"><a href="#Type-string-is-not-assignable-to-type-Enum-in-Typescript" class="headerlink" title="Type string is not assignable to type Enum in Typescript"></a>Type string is not assignable to type Enum in Typescript</h4><p>  å¦ä¸€ç§å¸¸è§æƒ…å†µå‡ºç°åœ¨æšä¸¾<code>Enum</code><br>  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">PrimaryColor</span> &#123;</span><br><span class="line">  red = <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">  yellow = <span class="string">&#x27;yellow&#x27;</span>,</span><br><span class="line">  green = <span class="string">&#x27;green&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Type &#x27;&quot;yellow&quot;&#x27; is not assignable to type &#x27;PrimaryColor&#x27;.</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">color</span>: <span class="title class_">PrimaryColor</span> = <span class="string">&#x27;yellow&#x27;</span></span><br></pre></td></tr></table></figure><br>  è§£å†³åŠæ³•<br>  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">enum</span> <span class="title class_">PrimaryColor</span> &#123;</span><br><span class="line">  red = <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">  yellow = <span class="string">&#x27;yellow&#x27;</span>,</span><br><span class="line">  green = <span class="string">&#x27;green&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">color1</span>: <span class="title class_">PrimaryColor</span> = <span class="title class_">PrimaryColor</span>.<span class="property">yellow</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">color2</span>: <span class="title class_">PrimaryColor</span> = <span class="string">&#x27;yellow&#x27;</span> <span class="keyword">as</span> <span class="title class_">PrimaryColor</span></span><br></pre></td></tr></table></figure></p><h4 id="Type-â€˜Xâ€™-is-not-assignable-to-type-â€˜Yâ€™-in-Typescript"><a href="#Type-â€˜Xâ€™-is-not-assignable-to-type-â€˜Yâ€™-in-Typescript" class="headerlink" title="Type â€˜Xâ€™ is not assignable to type â€˜Yâ€™ in Typescript"></a>Type â€˜Xâ€™ is not assignable to type â€˜Yâ€™ in Typescript</h4><p>  è¿™ç§æƒ…å†µå‡ºç°èµ‹å€¼æ—¶å·¦è¾¹çš„å˜é‡ä¸å³ä¾§çš„å€¼å…·æœ‰ä¸å…¼å®¹çš„ç±»å‹ï¼Œè§£å†³åŠæ³•å¯ä»¥é€šè¿‡<code>type assertion(ç±»å‹æ–­è¨€)</code>æˆ–<code>type guard(ç±»å‹å®ˆå«)</code>åœ¨èµ‹å€¼ä¹‹å‰æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦å…·æœ‰å…¼å®¹æ€§</p><p>  å¦‚ä¸‹ä¾‹ï¼š<br>  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// name: string</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;lemox&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Type &#x27;number&#x27; is not assignable to type &#x27;string&#x27;.</span></span><br><span class="line">name = <span class="number">100</span></span><br></pre></td></tr></table></figure><br>  å˜é‡<code>name</code>åˆå§‹åŒ–æ—¶è¢«typescriptæ¨æ–­ä¸º<code>string</code>ç±»å‹ï¼Œå½“æˆ‘ä»¬å°†<code>number</code>ç±»å‹åˆ†é…ç»™<code>name</code>æ—¶å°±ä¼šå‘ç”Ÿé”™è¯¯ã€‚è§£å†³åŠæ³•æ˜¯ç¡®ä¿ä¸¤ä¸ªå€¼å…·æœ‰å…¼å®¹æ€§æˆ–è€…ä½¿ç”¨ç±»å‹æ–­è¨€</p><p>  ä½¿ç”¨è”åˆç±»å‹å®šä¹‰å˜é‡<br>  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// name: string | number</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">name</span>: <span class="built_in">string</span> | <span class="built_in">number</span> = <span class="string">&#x27;lemox&#x27;</span></span><br><span class="line"></span><br><span class="line">name = <span class="number">100</span></span><br></pre></td></tr></table></figure><br>  æœ‰æ—¶ä½ å¯èƒ½çŸ¥é“ä¸¤ä¸ªå€¼å…·æœ‰å…¼å®¹æ€§ï¼Œä½†æ˜¯typescriptä¸çŸ¥é“ï¼Œè¿™æ—¶ä½ å¯ä»¥ä½¿ç”¨<code>type assertion(ç±»å‹æ–­è¨€)</code></p><p>  è¿˜æœ‰<br>  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  name?: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">country</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">person</span>: <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Bobby Hadz&#x27;</span>,</span><br><span class="line">  <span class="attr">country</span>: <span class="string">&#x27;Chile&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Type &#x27;string | undefined&#x27; is not assignable to type &#x27;string&#x27;.</span></span><br><span class="line"><span class="comment">// Type &#x27;undefined&#x27; is not assignable to type &#x27;string&#x27;.</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">name</span>: <span class="built_in">string</span> = person.<span class="property">name</span></span><br></pre></td></tr></table></figure><br>  ç”±äº<code>person.name</code>ä¸ºå¯é€‰å±æ€§ï¼Œå³å­˜åœ¨ä¸¤ç§ç±»å‹<code>string | undefined</code>ï¼Œå› æ­¤ç±»å‹ä¸å…¼å®¹ï¼Œå¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€æˆ–ç±»å‹å®ˆå«è§£å†³</p><ul><li><p>ç±»å‹æ–­è¨€</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  name?: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">country</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">person</span>: <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Bobby Hadz&#x27;</span>,</span><br><span class="line">  <span class="attr">country</span>: <span class="string">&#x27;Chile&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">name</span>: <span class="built_in">string</span> = person.<span class="property">name</span> <span class="keyword">as</span> <span class="built_in">string</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€æ˜ç¡®çš„å‘Šè¯‰<code>typescript</code>ï¼Œå½“å‰ä¸Šä¸‹æ–‡<code>person.name</code>ä¸º<code>string</code></p></li><li><p>ç±»å‹å®ˆå«<br>æ›´å¥½çš„åŠæ³•æ˜¯ä½¿ç”¨ç±»å‹å®ˆå«</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  name?: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">country</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">person</span>: <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Bobby Hadz&#x27;</span>,</span><br><span class="line">  <span class="attr">country</span>: <span class="string">&#x27;Chile&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">name</span>: <span class="built_in">string</span> = <span class="keyword">typeof</span> person.<span class="property">name</span> === <span class="string">&#x27;string&#x27;</span> ? person.<span class="property">name</span> : <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å¯ä»¥ç¡®ä¿æˆ‘ä»¬æ€»æ˜¯ç»™<code>name</code>åˆ†é…äº†ä¸€ä¸ªå­—ç¬¦ä¸²</p></li><li><p>è¿˜æœ‰ä¸€ç§å¸¸è§é”™è¯¯</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = arr.<span class="title function_">pop</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Type &#x27;number | undefined&#x27; is not assignable to type &#x27;number&#x27;.</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">first</span>: <span class="built_in">number</span> = result</span><br></pre></td></tr></table></figure><p>å› ä¸º<code>Array.pop()</code>æ–¹æ³•çš„è¿”å›å€¼å¯èƒ½ä¸º<code>undefined</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç›´æ¥å°†å…¶åˆ†é…ç»™<code>number</code>ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸Šæåˆ°çš„æ–¹å¼è§£å†³</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">const</span> result = arr.<span class="title function_">pop</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»å‹æ–­è¨€</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">num1</span>: <span class="built_in">number</span> = result <span class="keyword">as</span> <span class="built_in">number</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è”åˆç±»å‹</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">num2</span>: <span class="built_in">number</span> | <span class="literal">undefined</span> = result</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»å‹å®ˆå«</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">num3</span>: <span class="built_in">number</span> = result ?? <span class="number">0</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>  è¦è§£å†³<code>Type &#39;X&#39; is not assignable to type &#39;Y&#39;</code>é—®é¢˜ï¼Œä¸»è¦æ˜¯éœ€è¦ç¡®ä¿ä¸¤è¾¹å€¼ç±»å‹çš„å…¼å®¹æ€§ï¼Œå¦‚æœä¸¤ä¸ªå€¼å…¼å®¹æ€§ä¸åŒ¹é…ï¼Œåˆ™ä¼šå‘ç”Ÿé”™è¯¯</p>]]></content>
      
      
      <categories>
          
          <category> Typescript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typescriptä¸­çš„é€†å˜ä¸åå˜</title>
      <link href="/blog//Typescript%E4%B8%AD%E7%9A%84%E9%80%86%E5%8F%98%E4%B8%8E%E5%8D%8F%E5%8F%98/"/>
      <url>/blog//Typescript%E4%B8%AD%E7%9A%84%E9%80%86%E5%8F%98%E4%B8%8E%E5%8D%8F%E5%8F%98/</url>
      
        <content type="html"><![CDATA[<h2 id="Typescriptä¸­çš„é€†å˜ä¸åå˜"><a href="#Typescriptä¸­çš„é€†å˜ä¸åå˜" class="headerlink" title="Typescriptä¸­çš„é€†å˜ä¸åå˜"></a><center>Typescriptä¸­çš„é€†å˜ä¸åå˜</center></h2><p>  TypeScript æ˜¯ä¸€é—¨é™æ€ç±»å‹è¯­è¨€ï¼Œå…·æœ‰ä¸°å¯Œçš„ç±»å‹ç³»ç»Ÿç‰¹æ€§ï¼Œå…¶ä¸­é€†å˜å’Œåå˜æ˜¯ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µã€‚å®ƒä»¬åœ¨ TypeScript ä¸­ç”¨äºæè¿°å‡½æ•°ç±»å‹ã€æ³›å‹å’Œç±»ç»§æ‰¿ç­‰åœºæ™¯ä¸­çš„ç±»å‹è½¬æ¢å…³ç³»</p><h4 id="ä»€ä¹ˆæ˜¯é€†å˜å’Œåå˜"><a href="#ä»€ä¹ˆæ˜¯é€†å˜å’Œåå˜" class="headerlink" title="ä»€ä¹ˆæ˜¯é€†å˜å’Œåå˜"></a>ä»€ä¹ˆæ˜¯é€†å˜å’Œåå˜</h4><p>  åœ¨ TypeScript ä¸­ï¼Œé€†å˜å’Œåå˜æ˜¯ä¸¤ä¸ªç±»å‹è½¬æ¢çš„æ–¹å‘ã€‚é€†å˜ç”¨äºä»æ›´å…·ä½“çš„ç±»å‹è½¬æ¢ä¸ºæ›´ä¸€èˆ¬çš„ç±»å‹ï¼Œè€Œåå˜åˆ™ç”¨äºä»æ›´ä¸€èˆ¬çš„ç±»å‹è½¬æ¢ä¸ºæ›´å…·ä½“çš„ç±»å‹</p><p>  æ¢å¥è¯è¯´ï¼Œé€†å˜å’Œåå˜éƒ½æ˜¯ç”¨æ¥æè¿°ç±»å‹ä¹‹é—´çš„åŒ…å«å…³ç³»ã€‚é€†å˜æ„å‘³ç€ä¸€ä¸ªæ›´å…·ä½“çš„ç±»å‹å¯ä»¥æ›¿ä»£ä¸€ä¸ªæ›´ä¸€èˆ¬çš„ç±»å‹ï¼Œè€Œåå˜æ„å‘³ç€ä¸€ä¸ªæ›´ä¸€èˆ¬çš„ç±»å‹å¯ä»¥æ›¿ä»£ä¸€ä¸ªæ›´å…·ä½“çš„ç±»å‹</p><p>  ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªç±»å‹ A å’Œ Bï¼Œå¦‚æœ A æ˜¯ B çš„å­ç±»å‹ï¼Œé‚£ä¹ˆ A å°±æ˜¯æ›´å…·ä½“çš„ç±»å‹ï¼ŒB å°±æ˜¯æ›´ä¸€èˆ¬çš„ç±»å‹ã€‚é€†å˜å’Œåå˜åˆ†åˆ«æè¿°äº†ä» A åˆ° B å’Œä» B åˆ° A çš„ç±»å‹è½¬æ¢å…³ç³»</p><h4 id="TypeScriptä¸­çš„é€†å˜"><a href="#TypeScriptä¸­çš„é€†å˜" class="headerlink" title="TypeScriptä¸­çš„é€†å˜"></a>TypeScriptä¸­çš„é€†å˜</h4><p>  åœ¨ TypeScript ä¸­ï¼Œé€†å˜é€šå¸¸å‘ç”Ÿåœ¨å‡½æ•°å‚æ•°çš„ç±»å‹è½¬æ¢ä¸­ã€‚å½“å‡½æ•°å‚æ•°çš„ç±»å‹éœ€è¦æ¯”å‡½æ•°ç­¾åä¸­å£°æ˜çš„ç±»å‹æ›´å…·ä½“æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨é€†å˜</p><p>  ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•° fï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªç±»å‹ä¸º B çš„å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªç±»å‹ä¸º A çš„ç»“æœã€‚å¦‚æœæˆ‘ä»¬è¦å°†è¿™ä¸ªå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ gï¼Œå¹¶ä¸”è¿™ä¸ªå˜é‡éœ€è¦æ¥æ”¶ä¸€ä¸ªç±»å‹ä¸º A çš„å‚æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨é€†å˜ã€‚æˆ‘ä»¬å¯ä»¥å°† f å‡½æ•°çš„å‚æ•°ç±»å‹ä» B è½¬æ¢ä¸º A çš„è¶…ç±»å‹ï¼Œä»¥æ»¡è¶³å˜é‡ g çš„è¦æ±‚</p>  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> A &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> B <span class="keyword">extends</span> A &#123;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">b: B</span>): A &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">name</span>: b.<span class="property">name</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">g</span>: <span class="function">(<span class="params">a: A</span>) =&gt;</span> A = f <span class="comment">// ä½¿ç”¨é€†å˜ï¼Œå°† B è½¬æ¢ä¸º A çš„è¶…ç±»å‹</span></span><br></pre></td></tr></table></figure><p>  åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªæ¥å£ A å’Œ Bï¼Œå…¶ä¸­ B ç»§æ‰¿è‡ª Aã€‚å‡½æ•° f æ¥æ”¶ä¸€ä¸ªç±»å‹ä¸º B çš„å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªç±»å‹ä¸º A çš„ç»“æœã€‚æˆ‘ä»¬å°†è¿™ä¸ªå‡½æ•°èµ‹å€¼ç»™å˜é‡ gï¼Œå¹¶ä¸”éœ€è¦å°† B ç±»å‹çš„å‚æ•°è½¬æ¢ä¸º A ç±»å‹ï¼Œä»¥æ»¡è¶³ g å˜é‡çš„ç±»å‹è¦æ±‚</p><h4 id="TypeScriptä¸­çš„åå˜"><a href="#TypeScriptä¸­çš„åå˜" class="headerlink" title="TypeScriptä¸­çš„åå˜"></a>TypeScriptä¸­çš„åå˜</h4><p>  åå˜é€šå¸¸å‘ç”Ÿåœ¨å‡½æ•°è¿”å›å€¼çš„ç±»å‹è½¬æ¢ä¸­ã€‚å½“å‡½æ•°è¿”å›å€¼çš„ç±»å‹éœ€è¦æ¯”å‡½æ•°ç­¾åä¸­å£°æ˜çš„ç±»å‹æ›´å…·ä½“æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨åå˜</p><p>  ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•° fï¼Œå®ƒè¿”å›ä¸€ä¸ªç±»å‹ä¸º A çš„ç»“æœï¼Œä½†å®é™…ä¸Šå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªç±»å‹ä¸º B çš„å®ä¾‹ï¼Œå…¶ä¸­ B æ˜¯ A çš„å­ç±»å‹ã€‚å¦‚æœæˆ‘ä»¬è¦å°†è¿™ä¸ªå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ gï¼Œå¹¶ä¸”è¿™ä¸ªå˜é‡éœ€è¦è¿”å›ä¸€ä¸ªç±»å‹ä¸º B çš„ç»“æœï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨åå˜ã€‚æˆ‘ä»¬å¯ä»¥å°† f å‡½æ•°çš„è¿”å›å€¼ç±»å‹ä» A è½¬æ¢ä¸º B çš„å­ç±»å‹ï¼Œä»¥æ»¡è¶³å˜é‡ g çš„è¦æ±‚</p>  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> A &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> B <span class="keyword">extends</span> A &#123;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>): A &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">name</span>: <span class="string">&quot;foo&quot;</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">g</span>: <span class="function">() =&gt;</span> B = f <span class="comment">// ä½¿ç”¨åå˜ï¼Œå°† A è½¬æ¢ä¸º B çš„å­ç±»å‹</span></span><br></pre></td></tr></table></figure><p>  åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªæ¥å£ A å’Œ Bï¼Œå…¶ä¸­ B ç»§æ‰¿è‡ª Aã€‚å‡½æ•° f è¿”å›ä¸€ä¸ªç±»å‹ä¸º A çš„ç»“æœï¼Œå®é™…ä¸Šå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªç±»å‹ä¸º B çš„å®ä¾‹ã€‚æˆ‘ä»¬å°†è¿™ä¸ªå‡½æ•°èµ‹å€¼ç»™å˜é‡ gï¼Œå¹¶ä¸”éœ€è¦å°†è¿”å›å€¼ç±»å‹ä» A è½¬æ¢ä¸º B çš„å­ç±»å‹ï¼Œä»¥æ»¡è¶³ g å˜é‡çš„ç±»å‹è¦æ±‚</p><h4 id="TypeScriptä¸­çš„æ³›å‹é€†å˜å’Œåå˜"><a href="#TypeScriptä¸­çš„æ³›å‹é€†å˜å’Œåå˜" class="headerlink" title="TypeScriptä¸­çš„æ³›å‹é€†å˜å’Œåå˜"></a>TypeScriptä¸­çš„æ³›å‹é€†å˜å’Œåå˜</h4><p>  åœ¨ TypeScript ä¸­ï¼Œé€†å˜å’Œåå˜ä¹Ÿå¯ä»¥åº”ç”¨äºæ³›å‹ç±»å‹å‚æ•°ã€‚å½“ä¸€ä¸ªæ³›å‹ç±»å‹å‚æ•°éœ€è¦æ¯”å…¶å£°æ˜çš„ç±»å‹æ›´å…·ä½“æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨é€†å˜ï¼›å½“ä¸€ä¸ªæ³›å‹ç±»å‹å‚æ•°éœ€è¦æ¯”å…¶å£°æ˜çš„ç±»å‹æ›´ä¸€èˆ¬æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨åå˜</p><p>  ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ³›å‹å‡½æ•° fï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªç±»å‹ä¸º <code>Array&lt;B&gt;</code> çš„æ•°ç»„ï¼Œå¹¶è¿”å›ä¸€ä¸ªç±»å‹ä¸º <code>Array&lt;A&gt;</code> çš„æ•°ç»„ã€‚å¦‚æœæˆ‘ä»¬è¦å°†è¿™ä¸ªå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ gï¼Œå¹¶ä¸”è¿™ä¸ªå˜é‡éœ€è¦æ¥æ”¶ä¸€ä¸ªç±»å‹ä¸º <code>Array&lt;A&gt;</code> çš„æ•°ç»„ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨é€†å˜ã€‚æˆ‘ä»¬å¯ä»¥å°†æ³›å‹ç±»å‹å‚æ•° T çš„ç±»å‹ä» <code>Array&lt;B&gt;</code> è½¬æ¢ä¸º <code>Array&lt;A&gt;</code> çš„è¶…ç±»å‹ï¼Œä»¥æ»¡è¶³å˜é‡ g çš„è¦æ±‚</p>  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> A &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> B <span class="keyword">extends</span> A &#123;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> f&lt;T <span class="keyword">extends</span> B&gt;(<span class="attr">arr</span>: <span class="title class_">Array</span>&lt;T&gt;): <span class="title class_">Array</span>&lt;A&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> arr.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> (&#123; <span class="attr">name</span>: item.<span class="property">name</span> &#125;))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">g</span>: &lt;T <span class="keyword">extends</span> A&gt;<span class="function">(<span class="params">arr: <span class="built_in">Array</span>&lt;T&gt;</span>) =&gt;</span> <span class="title class_">Array</span>&lt;A&gt; = f <span class="comment">// ä½¿ç”¨é€†å˜ï¼Œå°† Array&lt;B&gt; è½¬æ¢ä¸º Array&lt;A&gt; çš„è¶…ç±»å‹</span></span><br></pre></td></tr></table></figure><p>  åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªæ¥å£ A å’Œ Bï¼Œå…¶ä¸­ B ç»§æ‰¿è‡ª Aã€‚æ³›å‹å‡½æ•° f æ¥æ”¶ä¸€ä¸ªç±»å‹ä¸º <code>Array&lt;B&gt;</code> çš„æ•°ç»„ï¼Œå¹¶è¿”å›ä¸€ä¸ªç±»å‹ä¸º <code>Array&lt;A&gt;</code> çš„æ•°ç»„ã€‚æˆ‘ä»¬å°†è¿™ä¸ªå‡½æ•°èµ‹å€¼ç»™å˜é‡ gï¼Œå¹¶ä¸”éœ€è¦å°†æ³›å‹ç±»å‹å‚æ•° T çš„ç±»å‹ä» <code>Array&lt;B&gt;</code> è½¬æ¢ä¸º <code>Array&lt;A&gt;</code> çš„è¶…ç±»å‹ï¼Œä»¥æ»¡è¶³å˜é‡ g çš„ç±»å‹è¦æ±‚</p><p>  å¦å¤–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ TypeScript ä¸­ï¼Œå‡½æ•°å‚æ•°å’Œè¿”å›å€¼æ˜¯å¯ä»¥åŒæ—¶å…·æœ‰é€†å˜å’Œåå˜çš„</p><p>  ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°ç±»å‹ Funcï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªç±»å‹ä¸º <code>Array&lt;A&gt;</code> çš„æ•°ç»„ï¼Œå¹¶è¿”å›ä¸€ä¸ªç±»å‹ä¸º <code>Array&lt;B&gt;</code> çš„æ•°ç»„ã€‚å¦‚æœæˆ‘ä»¬è¦å°†è¿™ä¸ªå‡½æ•°ç±»å‹èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ fï¼Œå¹¶ä¸”è¿™ä¸ªå˜é‡éœ€è¦æ¥æ”¶ä¸€ä¸ªç±»å‹ä¸º <code>Array&lt;B&gt;</code> çš„æ•°ç»„ï¼Œå¹¶è¿”å›ä¸€ä¸ªç±»å‹ä¸º <code>Array&lt;A&gt;</code> çš„æ•°ç»„ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦åŒæ—¶ä½¿ç”¨é€†å˜å’Œåå˜</p>  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> A &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> B <span class="keyword">extends</span> A &#123;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Func</span> = <span class="function">(<span class="params">arr: <span class="built_in">Array</span>&lt;A&gt;</span>) =&gt;</span> <span class="title class_">Array</span>&lt;B&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">f</span>: <span class="function">(<span class="params">arr: <span class="built_in">Array</span>&lt;B&gt;</span>) =&gt;</span> <span class="title class_">Array</span>&lt;A&gt; = (<span class="attr">arr</span>: <span class="title class_">Array</span>&lt;B&gt;): <span class="title class_">Array</span>&lt;A&gt; =&gt;</span><br><span class="line">  arr.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> (&#123; <span class="attr">name</span>: item.<span class="property">name</span> &#125;))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">g</span>: <span class="title class_">Func</span> = f <span class="comment">// åŒæ—¶ä½¿ç”¨é€†å˜å’Œåå˜ï¼Œå°†å‚æ•°ç±»å‹ä» Array&lt;B&gt; è½¬æ¢ä¸º Array&lt;A&gt;ï¼Œå°†è¿”å›å€¼ç±»å‹ä» Array&lt;A&gt; è½¬æ¢ä¸º Array&lt;B&gt;</span></span><br></pre></td></tr></table></figure><p>  åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªæ¥å£ A å’Œ Bï¼Œå…¶ä¸­ B ç»§æ‰¿è‡ª Aã€‚å‡½æ•°ç±»å‹ Func æ¥æ”¶ä¸€ä¸ªç±»å‹ä¸º <code>Array&lt;A&gt;</code> çš„æ•°ç»„ï¼Œå¹¶è¿”å›ä¸€ä¸ªç±»å‹ä¸º <code>Array&lt;B&gt;</code> çš„æ•°ç»„ã€‚æˆ‘ä»¬å°†å‡½æ•° f èµ‹å€¼ç»™å˜é‡ gï¼Œå¹¶ä¸”éœ€è¦åŒæ—¶ä½¿ç”¨é€†å˜å’Œåå˜ï¼Œä»¥æ»¡è¶³å˜é‡ g çš„ç±»å‹è¦æ±‚</p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>  åœ¨ TypeScript ä¸­ï¼Œé€†å˜å’Œåå˜æ˜¯éå¸¸æœ‰ç”¨çš„ç±»å‹ç³»ç»Ÿç‰¹æ€§ã€‚å®ƒä»¬å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£å’Œè®¾è®¡å‡½æ•°å’Œç±»å‹ã€‚é€†å˜å’Œåå˜çš„åŒºåˆ«åœ¨äºï¼Œé€†å˜æ˜¯æŒ‡ä¸€ä¸ªç±»å‹å¯ä»¥è¢«æ›¿æ¢ä¸ºå…¶è¶…ç±»å‹ï¼Œè€Œåå˜æ˜¯æŒ‡ä¸€ä¸ªç±»å‹å¯ä»¥è¢«æ›¿æ¢ä¸ºå…¶å­ç±»å‹ã€‚åœ¨ TypeScript ä¸­ï¼Œé€†å˜å’Œåå˜å¯ä»¥åº”ç”¨äºå‡½æ•°å‚æ•°ç±»å‹ã€å‡½æ•°è¿”å›å€¼ç±»å‹å’Œæ³›å‹ç±»å‹å‚æ•°</p><p>  ä½¿ç”¨é€†å˜å’Œåå˜å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¼–å†™æ›´çµæ´»ã€æ›´é€šç”¨çš„ä»£ç ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£å’Œè®¾è®¡æ¥å£å’Œç±»å‹ã€‚åœ¨ä½¿ç”¨é€†å˜å’Œåå˜æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ç±»å‹å®‰å…¨æ€§å’Œä»£ç çš„å¯è¯»æ€§ï¼Œä»¥é¿å…å‡ºç°æ½œåœ¨çš„é”™è¯¯å’Œå›°æƒ‘</p><p>  å¸Œæœ›è¿™ç¯‡åšå®¢èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ TypeScript ä¸­çš„é€†å˜å’Œåå˜ï¼Œå¹¶åœ¨å®é™…å¼€å‘ä¸­åº”ç”¨å®ƒä»¬</p>]]></content>
      
      
      <categories>
          
          <category> Typescript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Proxy</title>
      <link href="/blog//Proxy/"/>
      <url>/blog//Proxy/</url>
      
        <content type="html"><![CDATA[<h2 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a><center>Proxy</center></h2><h4 id="1-Proxyå¯¹è±¡ç”¨äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„ä»£ç†ï¼Œä»è€Œå®ç°åŸºæœ¬æ“ä½œçš„æ‹¦æˆªå’Œè‡ªå®šä¹‰"><a href="#1-Proxyå¯¹è±¡ç”¨äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„ä»£ç†ï¼Œä»è€Œå®ç°åŸºæœ¬æ“ä½œçš„æ‹¦æˆªå’Œè‡ªå®šä¹‰" class="headerlink" title="1. Proxyå¯¹è±¡ç”¨äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„ä»£ç†ï¼Œä»è€Œå®ç°åŸºæœ¬æ“ä½œçš„æ‹¦æˆªå’Œè‡ªå®šä¹‰"></a>1. <code>Proxy</code>å¯¹è±¡ç”¨äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„ä»£ç†ï¼Œä»è€Œå®ç°åŸºæœ¬æ“ä½œçš„æ‹¦æˆªå’Œè‡ªå®šä¹‰</h4>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Proxy</span>(target, handler)</span><br></pre></td></tr></table></figure><ul><li><p>target</p><p>è¦ä½¿ç”¨<code>Proxy</code>åŒ…è£…çš„ç›®æ ‡å¯¹è±¡ï¼ˆå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬åŸç”Ÿæ•°ç»„ï¼Œå‡½æ•°ï¼Œç”šè‡³å¦ä¸€ä¸ªä»£ç†ï¼‰</p></li><li><p>handler</p><p>ä¸€ä¸ªé€šå¸¸ä»¥å‡½æ•°ä½œä¸ºå±æ€§çš„å¯¹è±¡ï¼Œå„å±æ€§ä¸­çš„å‡½æ•°åˆ†åˆ«å®šä¹‰äº†åœ¨æ‰§è¡Œå„ç§æ“ä½œæ—¶ä»£ç†Â <code>p</code>çš„è¡Œä¸º</p><p>å¦‚æœ<code>handler</code>æ²¡æœ‰è®¾ç½®ä»»ä½•æ‹¦æˆªè¡Œä¸ºï¼Œé‚£å°±ç­‰åŒäºç›´æ¥é€šå‘åŸå¯¹è±¡</p></li></ul><h4 id="2-è¦ä½¿å¾—Proxyèµ·ä½œç”¨ï¼Œå¿…é¡»é’ˆå¯¹Proxyå®ä¾‹è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯é’ˆå¯¹ç›®æ ‡å¯¹è±¡è¿›è¡Œæ“ä½œï¼ˆå¯ä»¥å°†Proxyå¯¹è±¡è®¾ç½®åˆ°å¯¹è±¡object-proxyå±æ€§ï¼Œä»è€Œå¯ä»¥åœ¨å¯¹è±¡ä¸Šè°ƒç”¨ï¼‰"><a href="#2-è¦ä½¿å¾—Proxyèµ·ä½œç”¨ï¼Œå¿…é¡»é’ˆå¯¹Proxyå®ä¾‹è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯é’ˆå¯¹ç›®æ ‡å¯¹è±¡è¿›è¡Œæ“ä½œï¼ˆå¯ä»¥å°†Proxyå¯¹è±¡è®¾ç½®åˆ°å¯¹è±¡object-proxyå±æ€§ï¼Œä»è€Œå¯ä»¥åœ¨å¯¹è±¡ä¸Šè°ƒç”¨ï¼‰" class="headerlink" title="2. è¦ä½¿å¾—Proxyèµ·ä½œç”¨ï¼Œå¿…é¡»é’ˆå¯¹Proxyå®ä¾‹è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯é’ˆå¯¹ç›®æ ‡å¯¹è±¡è¿›è¡Œæ“ä½œï¼ˆå¯ä»¥å°†Proxyå¯¹è±¡è®¾ç½®åˆ°å¯¹è±¡object.proxyå±æ€§ï¼Œä»è€Œå¯ä»¥åœ¨å¯¹è±¡ä¸Šè°ƒç”¨ï¼‰"></a>2. è¦ä½¿å¾—<code>Proxy</code>èµ·ä½œç”¨ï¼Œå¿…é¡»é’ˆå¯¹<code>Proxy</code>å®ä¾‹è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯é’ˆå¯¹ç›®æ ‡å¯¹è±¡è¿›è¡Œæ“ä½œï¼ˆå¯ä»¥å°†<code>Proxy</code>å¯¹è±¡è®¾ç½®åˆ°å¯¹è±¡<code>object.proxy</code>å±æ€§ï¼Œä»è€Œå¯ä»¥åœ¨å¯¹è±¡ä¸Šè°ƒç”¨ï¼‰</h4>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> proxy = <span class="keyword">new</span> <span class="title class_">Proxy</span>(&#123;&#125;, &#123;</span><br><span class="line">  <span class="attr">get</span>: <span class="keyword">function</span>(<span class="params">target, propKey</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;proxy&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = <span class="title class_">Object</span>.<span class="title function_">create</span>(proxy);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">time</span>) <span class="comment">// &#x27;proxy&#x27;</span></span><br></pre></td></tr></table></figure><p>  <code>proxy</code>å¯¹è±¡æ˜¯<code>obj</code>å¯¹è±¡çš„åŸå‹ï¼Œ<code>obj</code>å¯¹è±¡æœ¬èº«å¹¶æ²¡æœ‰<code>time</code>å±æ€§ï¼Œæ‰€ä»¥æ ¹æ®åŸå‹é“¾ï¼Œä¼šåœ¨<code>proxy</code>å¯¹è±¡ä¸Šè¯»å–è¯¥å±æ€§ï¼Œå¯¼è‡´è¢«æ‹¦æˆª</p><h4 id="3-Proxy-revocable-ï¼šåˆ›å»ºä¸€ä¸ªå¯æ’¤é”€çš„Proxyå¯¹è±¡"><a href="#3-Proxy-revocable-ï¼šåˆ›å»ºä¸€ä¸ªå¯æ’¤é”€çš„Proxyå¯¹è±¡" class="headerlink" title="3. Proxy.revocable()ï¼šåˆ›å»ºä¸€ä¸ªå¯æ’¤é”€çš„Proxyå¯¹è±¡"></a>3. <code>Proxy.revocable()</code>ï¼šåˆ›å»ºä¸€ä¸ªå¯æ’¤é”€çš„<code>Proxy</code>å¯¹è±¡</h4>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; proxy, revoke &#125; = <span class="title class_">Proxy</span>.<span class="title function_">revocable</span>(target, handler)</span><br><span class="line"></span><br><span class="line">proxy <span class="comment">// å¯¹è±¡ï¼šä»£ç†å®ä¾‹</span></span><br><span class="line"><span class="title function_">revoke</span>() <span class="comment">// å‡½æ•°ï¼šå–æ¶ˆä»£ç†ï¼Œæ‰§è¡Œrevoke()åå†è®¿é—®å°±ä¼šæŠ¥é”™</span></span><br></pre></td></tr></table></figure><h4 id="4-thisé—®é¢˜"><a href="#4-thisé—®é¢˜" class="headerlink" title="4. thisé—®é¢˜"></a>4. <code>this</code>é—®é¢˜</h4><p>  åœ¨<code>Proxy</code>ä»£ç†çš„æƒ…å†µä¸‹ï¼Œç›®æ ‡å¯¹è±¡å†…éƒ¨çš„<code>this</code>å…³é”®å­—ä¼šæŒ‡å‘<code>Proxy</code>ä»£ç†ï¼Œè€Œæ‹¦æˆªå‡½æ•°<code>this</code>æŒ‡å‘<code>handler</code>å¯¹è±¡</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> target = &#123;</span><br><span class="line">  <span class="attr">m</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handler = &#123;</span><br><span class="line">  <span class="title function_">set</span>(<span class="params">target, prop, value, receiver</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">// hander</span></span><br><span class="line">    target[prop] = value</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> proxy = <span class="keyword">new</span> <span class="title class_">Proxy</span>(target, handler);</span><br><span class="line"></span><br><span class="line">target.<span class="title function_">m</span>() <span class="comment">// target</span></span><br><span class="line">proxy.<span class="title function_">m</span>()  <span class="comment">// proxy</span></span><br><span class="line">proxy.<span class="property">name</span> = <span class="string">&#x27;lemon&#x27;</span></span><br></pre></td></tr></table></figure><p>  æ­¤å¤–ï¼Œæœ‰äº›åŸç”Ÿå¯¹è±¡çš„å†…éƒ¨å±æ€§ï¼Œåªæœ‰é€šè¿‡æ­£ç¡®çš„<code>this</code>æ‰èƒ½æ‹¿åˆ°ï¼Œæ‰€ä»¥<code>Proxy</code>ä¹Ÿæ— æ³•ä»£ç†è¿™äº›åŸç”Ÿå¯¹è±¡çš„å±æ€§</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> target = <span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line"><span class="keyword">const</span> handler = &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> proxy = <span class="keyword">new</span> <span class="title class_">Proxy</span>(target, handler)</span><br><span class="line"></span><br><span class="line">proxy.<span class="title function_">getDate</span>()</span><br><span class="line"><span class="comment">// TypeError: this is not a Date object.</span></span><br></pre></td></tr></table></figure><h4 id="5-handlerå¯¹è±¡çš„æ–¹æ³•ï¼ˆç›®å‰æ ‡å‡†çš„æ˜¯13ç§ï¼‰"><a href="#5-handlerå¯¹è±¡çš„æ–¹æ³•ï¼ˆç›®å‰æ ‡å‡†çš„æ˜¯13ç§ï¼‰" class="headerlink" title="5. handlerå¯¹è±¡çš„æ–¹æ³•ï¼ˆç›®å‰æ ‡å‡†çš„æ˜¯13ç§ï¼‰"></a>5. <code>handler</code>å¯¹è±¡çš„æ–¹æ³•ï¼ˆç›®å‰æ ‡å‡†çš„æ˜¯13ç§ï¼‰</h4><ul><li><code>get(target, prop, receiver)</code>ï¼šå±æ€§è¯»å–æ“ä½œçš„æ•æ‰å™¨</li><li><code>set(target, prop, value, receiver)</code>ï¼šå±æ€§è®¾ç½®æ“ä½œçš„æ•æ‰å™¨ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼</li><li><code>has(target, prop)</code>ï¼š<code>in</code>æ“ä½œç¬¦çš„æ•æ‰å™¨ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼</li><li><code>deleteProperty(target, property)</code>ï¼š<code>delete</code>æ“ä½œç¬¦çš„æ•æ‰å™¨ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼</li><li><code>ownKeys(target)</code>ï¼š<code>Object.getOwnPropertyNames</code>æ–¹æ³•å’ŒÂ <code>Object.getOwnPropertySymbols</code>æ–¹æ³•çš„æ•æ‰å™¨ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„</li><li><code>getOwnPropertyDescriptor(target, prop)</code>ï¼š<code>Object.getOwnPropertyDescriptor</code>æ–¹æ³•çš„æ•æ‰å™¨ï¼Œè¿”å›å±æ€§çš„æè¿°å¯¹è±¡</li><li><code>defineProperty(target, property, descriptor)</code>ï¼š<code>Object.defineProperty</code>æ–¹æ³•çš„æ•æ‰å™¨ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼</li><li><code>preventExtensions(target)</code>ï¼š<code>Object.preventExtensions</code>æ–¹æ³•çš„æ•æ‰å™¨ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼</li><li><code>getPrototypeOf(target)</code>ï¼š<code>Object.getPrototypeOf</code>æ–¹æ³•çš„æ•æ‰å™¨ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼</li><li><code>setPrototypeOf(target, prototype)</code>ï¼š<code>Object.setPrototypeOf</code>æ–¹æ³•çš„æ•æ‰å™¨ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼</li><li><code>isExtensible(target)</code>ï¼š<code>Object.isExtensible</code>æ–¹æ³•çš„æ•æ‰å™¨ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼</li><li><code>apply(target, thisArg, argumentsList)</code>ï¼šå‡½æ•°è°ƒç”¨æ“ä½œçš„æ•æ‰å™¨</li><li><code>construct(target, argumentsList, newTarget)</code>ï¼š<code>new</code>æ“ä½œç¬¦çš„æ•æ‰å™¨ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡</li></ul><h4 id="6-å®ä¾‹"><a href="#6-å®ä¾‹" class="headerlink" title="6. å®ä¾‹"></a>6. å®ä¾‹</h4><ul><li><p><code>get(target, prop, receiver)</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Params</span> = &#123; <span class="attr">target</span>: <span class="string">&#x27;ç›®æ ‡å¯¹è±¡&#x27;</span>, <span class="attr">prop</span>: <span class="string">&#x27;å±æ€§å&#x27;</span>, <span class="attr">receiver</span>: <span class="string">&#x27;Proxyæˆ–è€…ç»§æ‰¿Proxyçš„å¯¹è±¡&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>å¦‚æœç›®æ ‡å¯¹è±¡çš„å±æ€§ä¸å¯é…ç½®<code>configurable: false</code>ä¸”ä¸å¯å†™<code>writable: false</code>ï¼Œåˆ™<code>Proxy</code>ä¸èƒ½ä¿®æ”¹è¯¥å±æ€§ï¼Œé€šè¿‡<code>Proxy</code>è®¿é—®è¯¥å±æ€§ä¼šæŠ¥é”™</li><li>å¦‚æœç›®æ ‡å±æ€§æ²¡æœ‰é…ç½®è®¿é—®æ–¹æ³•ï¼Œå³getæ–¹æ³•ä¸º<code>undefined</code>ï¼Œåˆ™è¿”å›å€¼å¿…é¡»ä¸º<code>undefined</code></li></ul></li><li><p><code>set(target, prop, value, receiver)</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Params</span> = &#123; <span class="attr">target</span>: <span class="string">&#x27;ç›®æ ‡å¯¹è±¡&#x27;</span>, <span class="attr">prop</span>: <span class="string">&#x27;å±æ€§å&#x27;</span>, <span class="attr">value</span>: <span class="string">&#x27;å±æ€§å€¼&#x27;</span>, <span class="attr">receiver</span>: <span class="string">&#x27;Proxyå®ä¾‹æœ¬èº«&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>å¦‚æœç›®æ ‡å¯¹è±¡çš„å±æ€§ä¸å¯å†™<code>writable: false</code>ï¼Œåˆ™<code>set</code>æ–¹æ³•æ— æ•ˆ</li><li>è¿”å›<code>Boolean</code>å€¼ï¼Œ<code>true</code>è®¾ç½®æˆåŠŸï¼Œ<code>false</code>è®¾ç½®å¤±è´¥ï¼ˆä¸¥æ ¼æ¨¡å¼<code>false</code>ä¼šæŠ¥é”™ï¼‰</li><li>å¦‚æœç›®æ ‡å±æ€§æ²¡æœ‰é…ç½®å‚¨å­˜æ–¹æ³•ï¼Œå³<code>set</code>æ–¹æ³•ä¸º<code>undefined</code>ï¼Œåˆ™ä¸èƒ½è®¾ç½®å€¼</li></ul></li><li><p><code>apply(target, thisArg, argumentsList)</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Params</span> = &#123; <span class="attr">target</span>: <span class="string">&#x27;ç›®æ ‡å¯¹è±¡&#x27;</span>, <span class="attr">thisArg</span>: <span class="string">&#x27;ç›®æ ‡å¯¹è±¡çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ˆthisï¼‰&#x27;</span>, <span class="attr">argumentsList</span>: <span class="string">&#x27;å‚æ•°æ•°ç»„&#x27;</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> twice = &#123;</span><br><span class="line">  apply (target, thisArg, argumentsList) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">apply</span>(...<span class="variable language_">arguments</span>) * <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span> (left, right) &#123;</span><br><span class="line">  <span class="keyword">return</span> left + right</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> proxy = <span class="keyword">new</span> <span class="title class_">Proxy</span>(sum, twice)</span><br><span class="line"><span class="title function_">proxy</span>(<span class="number">1</span>, <span class="number">2</span>) <span class="comment">// 6</span></span><br><span class="line">proxy.<span class="title function_">call</span>(<span class="literal">null</span>, <span class="number">5</span>, <span class="number">6</span>) <span class="comment">// 22</span></span><br><span class="line">proxy.<span class="title function_">apply</span>(<span class="literal">null</span>, [<span class="number">7</span>, <span class="number">8</span>]) <span class="comment">// 30</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li><code>target</code>å¿…é¡»æ˜¯å¯ä»¥è¢«è°ƒç”¨çš„ï¼Œå³å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡</li></ul></li><li><p><code>has(target, prop)</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Params</span> = &#123; <span class="attr">target</span>: <span class="string">&#x27;ç›®æ ‡å¯¹è±¡&#x27;</span>, <span class="attr">prop</span>: <span class="string">&#x27;å±æ€§å&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>å¦‚æœç›®æ ‡å¯¹è±¡ä¸å¯æ‰©å±•ï¼Œä½¿ç”¨<code>has</code>æ‹¦æˆªå°±ä¼šæŠ¥é”™</li><li>å¦‚æœç›®æ ‡å¯¹è±¡çš„æŸä¸€å±æ€§æœ¬èº«ä¸å¯è¢«é…ç½®ï¼Œä½¿ç”¨<code>has</code>æ‹¦æˆªå°±ä¼šæŠ¥é”™</li></ul></li><li><p><code>construct(target, argumentsList, newTarget)</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Params</span> = &#123; <span class="attr">target</span>: <span class="string">&#x27;ç›®æ ‡å¯¹è±¡ï¼ˆå‡½æ•°ï¼‰&#x27;</span>, <span class="attr">argumentsList</span>: <span class="string">&#x27;å‚æ•°æ•°ç»„&#x27;</span>, <span class="attr">newTarget</span>: <span class="string">&#x27;new å‘½ä»¤ä½œç”¨çš„æ„é€ å‡½æ•°&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè¿”å›å€¼å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œç”±äº<code>construct()</code>æ‹¦æˆªæ„é€ å‡½æ•°ï¼Œæ‰€ä»¥ç›®æ ‡å¯¹è±¡å¿…é¡»æ˜¯å‡½æ•°</p></li><li><p><code>deleteProperty(target, property)</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Params</span> = &#123; <span class="attr">target</span>: <span class="string">&#x27;ç›®æ ‡å¯¹è±¡&#x27;</span>, <span class="attr">property</span>: <span class="string">&#x27;å±æ€§å&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li><code>deleteProperty</code>å¿…é¡»è¿”å›ä¸€ä¸ªÂ <code>Boolean</code>ç±»å‹çš„å€¼ï¼Œè¡¨ç¤ºäº†è¯¥å±æ€§æ˜¯å¦è¢«æˆåŠŸåˆ é™¤</li><li>å¦‚æœç›®æ ‡å¯¹è±¡å±æ€§ä¸å¯é…ç½®<code>configurable: false</code>ï¼Œä¸èƒ½è¢«åˆ é™¤ï¼Œå°±ä¼šæŠ¥é”™</li></ul></li><li><p><code>defineProperty(target, property, descriptor)</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Params</span> = &#123; <span class="attr">target</span>: <span class="string">&#x27;ç›®æ ‡å¯¹è±¡&#x27;</span>, <span class="attr">property</span>: <span class="string">&#x27;å±æ€§å&#x27;</span>, <span class="attr">descriptor</span>: <span class="string">&#x27;å¾…å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„æè¿°ç¬¦&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li><code>defineProperty</code>æ–¹æ³•å¿…é¡»ä»¥ä¸€ä¸ªÂ <code>Boolean</code>è¿”å›ï¼Œè¡¨ç¤ºå®šä¹‰è¯¥å±æ€§çš„æ“ä½œæˆåŠŸä¸å¦ï¼ˆä¸¥æ ¼æ¨¡å¼è¿”å›<code>false</code>ä¼šæŠ¥é”™ï¼‰</li><li>å¦‚æœç›®æ ‡å¯¹è±¡ä¸å¯æ‰©å±•ï¼ˆ<code>non-extensible</code>ï¼‰ï¼Œåˆ™<code>defineProperty()</code>ä¸èƒ½å¢åŠ ç›®æ ‡å¯¹è±¡ä¸Šä¸å­˜åœ¨çš„å±æ€§ï¼Œå¦åˆ™ä¼šæŠ¥é”™</li><li>å¦‚æœç›®æ ‡å¯¹è±¡å±æ€§ä¸å¯å†™<code>writable</code>æˆ–ä¸å¯é…ç½®<code>configurable</code>ï¼Œåˆ™<code>defineProperty()</code>æ–¹æ³•ä¸èƒ½æ”¹å˜è¿™ä¸¤ä¸ªè®¾ç½®</li></ul></li><li><p><code>getOwnPropertyDescriptor(target, prop)</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Params</span> = &#123; <span class="attr">target</span>: <span class="string">&#x27;ç›®æ ‡å¯¹è±¡&#x27;</span>, <span class="attr">prop</span>: <span class="string">&#x27;å±æ€§å&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li><code>getOwnPropertyDescriptor</code>å¿…é¡»è¿”å›ä¸€ä¸ª<code>object</code>æˆ–<code>undefined</code></li></ul></li><li><p><code>getPrototypeOf(target)</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Params</span> = &#123; <span class="attr">target</span>: <span class="string">&#x27;ç›®æ ‡å¯¹è±¡&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li><code>getPrototypeOf()</code>å¿…é¡»è¿”å›å¯¹è±¡æˆ–è€…<code>null</code>ï¼Œå¦åˆ™ä¼šæŠ¥é”™</li><li>å¦‚æœç›®æ ‡å¯¹è±¡ä¸å¯æ‰©å±•ï¼ˆ<code>non-extensible</code>ï¼‰ï¼Œ<code>getPrototypeOf()</code>æ–¹æ³•å¿…é¡»è¿”å›ç›®æ ‡å¯¹è±¡çš„åŸå‹å¯¹è±¡</li></ul></li><li><p><code>isExtensible(target)</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Params</span> = &#123; <span class="attr">target</span>: <span class="string">&#x27;ç›®æ ‡å¯¹è±¡&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li><code>isExtensible()</code>å¿…é¡»è¿”å›å¸ƒå°”å€¼ï¼Œå¦åˆ™è¿”å›å€¼ä¼šè¢«è‡ªåŠ¨è½¬ä¸ºå¸ƒå°”å€¼ï¼Œä¸”è¿”å›å€¼å¿…é¡»ä¸ç›®æ ‡å¯¹è±¡çš„<code>isExtensible</code>å±æ€§ä¿æŒä¸€è‡´ï¼Œå¦åˆ™ä¼šä¿æŒ</li></ul></li><li><p><code>ownKeys(target)</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Params</span> = &#123; <span class="attr">target</span>: <span class="string">&#x27;ç›®æ ‡å¯¹è±¡&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>ä½¿ç”¨<code>Object.keys()</code>æ–¹æ³•æ—¶ï¼Œæœ‰ä¸‰ç±»å±æ€§ä¼šè¢«<code>ownKeys()</code>è‡ªåŠ¨è¿‡æ»¤ï¼Œä¸ä¼šè¿”å›ï¼ˆ1. ä¸å­˜åœ¨çš„å±æ€§ 2. Symbolå±æ€§ 3. ä¸å¯éå†<code>enumerable</code>å±æ€§ï¼‰</li><li><code>ownkeys()</code>æ–¹æ³•è¿”å›çš„æ•°ç»„æˆå‘˜ï¼Œåªèƒ½æ˜¯å­—ç¬¦ä¸²æˆ–<code>Symbol</code>å€¼ï¼Œå…¶ä»–ç±»å‹æˆ–è€…æ ¹æœ¬ä¸æ˜¯æ•°ç»„å°±ä¼šæŠ¥é”™</li><li>å¦‚æœç›®æ ‡å¯¹è±¡åŒ…å«ä¸å¯é…ç½®çš„å±æ€§ï¼Œåˆ™è¯¥å±æ€§å¿…é¡»è¢«<code>ownkeys()</code>è¿”å›ï¼Œå¦åˆ™ä¼šæŠ¥é”™</li><li>å¦‚æœç›®æ ‡å¯¹è±¡ä¸å¯æ‰©å±•ï¼ˆ<code>non-extensible</code>ï¼‰ï¼Œ<code>ownkeys()</code>å¿…é¡»è¿”å›åŸå¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œä¸”ä¸èƒ½åŒ…å«å¤šä½™çš„å±æ€§ï¼Œå¦åˆ™ä¼šæŠ¥é”™</li></ul></li><li><p><code>preventExtensions(target)</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Params</span> = &#123; <span class="attr">target</span>: <span class="string">&#x27;ç›®æ ‡å¯¹è±¡&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li><code>preventExtensions()</code>æœ‰ä¸€ä¸ªé™åˆ¶ï¼Œåªæœ‰å½“ç›®æ ‡å¯¹è±¡ä¸å¯æ‰©å±•æ—¶ï¼ˆå³<code>Object.isExtensible(proxy)</code>ä¸º<code>false</code>ï¼‰ï¼Œ<code>proxy.preventExtensions</code>åªèƒ½è¿”å›<code>true</code>ï¼Œå¦åˆ™ä¼šæŠ¥é”™</li><li><code>preventExtensions()</code>è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼</li></ul></li><li><p><code>setPrototypeOf(target, prototype)</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Params</span> = &#123; <span class="attr">target</span>: <span class="string">&#x27;ç›®æ ‡å¯¹è±¡&#x27;</span>, <span class="attr">prototype</span>: <span class="string">&#x27;å¯¹è±¡æ–°åŸå‹æˆ–null&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>å¦‚æœä¿®æ”¹æˆåŠŸï¼ŒÂ <code>setPrototypeOf</code>æ–¹æ³•è¿”å›Â <code>true</code>ï¼Œå¦åˆ™è¿”å›Â <code>false</code></li><li>å¦‚æœ<code>target</code>ä¸å¯æ‰©å±•ï¼ŒåŸå‹å‚æ•°å¿…é¡»ä¸<code>Object.setPropertyOf(target)</code>çš„å€¼ç›¸åŒ</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>package.json</title>
      <link href="/blog//package-json/"/>
      <url>/blog//package-json/</url>
      
        <content type="html"><![CDATA[<h2 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a><center>package.json</center></h2>]]></content>
      
      
      <categories>
          
          <category> Node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript Garbage Collecation</title>
      <link href="/blog//JavaScript-Garbage-Collecation/"/>
      <url>/blog//JavaScript-Garbage-Collecation/</url>
      
        <content type="html"><![CDATA[<h2 id="JavaScript-Garbage-Collecationï¼ˆåƒåœ¾å›æ”¶ï¼‰"><a href="#JavaScript-Garbage-Collecationï¼ˆåƒåœ¾å›æ”¶ï¼‰" class="headerlink" title="JavaScript Garbage Collecationï¼ˆåƒåœ¾å›æ”¶ï¼‰"></a><center>JavaScript Garbage Collecationï¼ˆåƒåœ¾å›æ”¶ï¼‰</center></h2><h4 id="1-åƒåœ¾å›æ”¶å®šä¹‰"><a href="#1-åƒåœ¾å›æ”¶å®šä¹‰" class="headerlink" title="1. åƒåœ¾å›æ”¶å®šä¹‰"></a>1. åƒåœ¾å›æ”¶å®šä¹‰</h4><p>  æ‰¾å‡ºä¸å†ä½¿ç”¨çš„å˜é‡ï¼Œç„¶åé‡Šæ”¾æ‰å…¶å ç”¨çš„å†…å­˜ï¼Œä½†æ˜¯è¿™ä¸ªè¿‡ç¨‹ä¸æ˜¯æ—¶æ—¶çš„ï¼Œå› ä¸ºå…¶å¼€é”€æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥åƒåœ¾å›æ”¶å™¨ä¼šæŒ‰ç…§å›ºå®šçš„æ—¶é—´é—´éš”å‘¨æœŸæ€§çš„æ‰§è¡Œã€‚</p><h4 id="2-JSåƒåœ¾å›æ”¶æœºåˆ¶"><a href="#2-JSåƒåœ¾å›æ”¶æœºåˆ¶" class="headerlink" title="2. JSåƒåœ¾å›æ”¶æœºåˆ¶"></a>2. JSåƒåœ¾å›æ”¶æœºåˆ¶</h4><ul><li><p>æ ‡è®°æ¸…é™¤</p><p>  JavaScriptä¸­æœ€å¸¸ç”¨çš„åƒåœ¾å›æ”¶æ–¹å¼ã€‚å½“å˜é‡è¿›å…¥æ‰§è¡Œç¯å¢ƒæ ‡è®°ä¸ºâ€œè¿›å…¥ç¯å¢ƒâ€ï¼Œç¦»å¼€ç¯å¢ƒå°†å…¶æ ‡è®°ä¸ºâ€œç¦»å¼€ç¯å¢ƒâ€ï¼Œç­‰å¾…æ¸…é™¤</p></li><li><p>å¼•ç”¨è®¡æ•°</p><p>  è¯­è¨€å¼•æ“å­˜åœ¨ä¸€å¼ â€œå¼•ç”¨è¡¨â€ï¼Œä¿å­˜äº†å†…å­˜é‡Œé¢æ‰€æœ‰çš„èµ„æºï¼ˆé€šå¸¸æ˜¯å„ç§å€¼ï¼‰çš„å¼•ç”¨æ¬¡æ•°ï¼Œå¦‚æœä¸€ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°æ˜¯0ï¼Œå°±è¡¨ç¤ºè¿™ä¸ªå€¼ä¸å†è¢«ä½¿ç”¨äº†ï¼Œå› æ­¤å¯ä»¥å°†è¿™å—å†…å­˜é‡Šæ”¾</p><p>  å¼•ç”¨è®¡æ•°çš„é—®é¢˜ï¼šå¾ªç¯å¼•ç”¨</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> obj1 = &#123;&#125;</span><br><span class="line">  <span class="keyword">let</span> obj2 = &#123;&#125;</span><br><span class="line"></span><br><span class="line">  obj1.<span class="property">next</span> = obj2</span><br><span class="line">  obj2.<span class="property">next</span> = obj1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  å½“å‡½æ•°æ‰§è¡Œç»“æŸåï¼Œè¿”å›å€¼ä¸º<code>undefined</code>ï¼Œæ‰€ä»¥æ•´ä¸ªå‡½æ•°ä»¥åŠå†…éƒ¨å˜é‡éƒ½åº”è¯¥è¢«å›æ”¶ï¼Œä½†æ˜¯æ ¹æ®å¼•ç”¨è®¡æ•°æ–¹æ³•ï¼Œ<code>obj1</code> å’Œ <code>obj2</code> çš„å¼•ç”¨æ¬¡æ•°éƒ½ä¸ä¸º0ï¼Œæ‰€ä»¥å®ƒä»¬ä¸ä¼šè¢«å›æ”¶ï¼Œè§£å†³å¾ªç¯å¼•ç”¨çš„åŠæ³•ï¼šä¸ä½¿ç”¨å®ƒä»¬çš„æ—¶å€™æ‰‹åŠ¨å°†å®ƒä»¬è®¾ä¸º<code>null</code></p></li></ul><h4 id="3-å†…å­˜æ³„æ¼"><a href="#3-å†…å­˜æ³„æ¼" class="headerlink" title="3. å†…å­˜æ³„æ¼"></a>3. å†…å­˜æ³„æ¼</h4><ul><li><p>æ„å¤–çš„å…¨å±€å˜é‡</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">arg</span>) &#123;</span><br><span class="line">    bar = <span class="string">&quot;this is a hidden global variable&quot;</span>; <span class="comment">// å®šä¹‰æˆäº†å…¨å±€å¯¹è±¡(window)å±æ€§</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">variable</span> = <span class="number">0</span> <span class="comment">// thisæŒ‡å‘äº†å…¨å±€å¯¹è±¡(window)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ç”¨ä¸¥æ ¼æ¨¡å¼å¯ä»¥é¿å…æ„å¤–çš„å…¨å±€å˜é‡</span></span><br></pre></td></tr></table></figure></li><li><p>è¢«é—å¿˜çš„è®¡æ—¶å™¨æˆ–å›è°ƒå‡½æ•°</p></li><li><p>é—­åŒ…</p></li><li><p>æ²¡æœ‰æ¸…ç†çš„DOMå…ƒç´ å¼•ç”¨</p></li></ul><h4 id="4-é¿å…å†…å­˜æ³„æ¼çš„ä¸€äº›æ–¹å¼"><a href="#4-é¿å…å†…å­˜æ³„æ¼çš„ä¸€äº›æ–¹å¼" class="headerlink" title="4. é¿å…å†…å­˜æ³„æ¼çš„ä¸€äº›æ–¹å¼"></a>4. é¿å…å†…å­˜æ³„æ¼çš„ä¸€äº›æ–¹å¼</h4><ul><li>å‡å°‘ä¸å¿…è¦çš„å…¨å±€å˜é‡æˆ–è€…ç”Ÿå‘½å‘¨æœŸè¾ƒé•¿çš„å¯¹è±¡ï¼ŒåŠæ—¶å¯¹æ— ç”¨çš„æ•°æ®è¿›è¡Œåƒåœ¾å›æ”¶</li><li>æ³¨æ„ç¨‹åºé€»è¾‘ï¼Œé¿å…â€œæ­»å¾ªç¯â€</li><li>é¿å…åˆ›å»ºè¿‡å¤šçš„å¯¹è±¡ï¼Œä¸ä½¿ç”¨çš„æ—¶å€™æ‰‹åŠ¨å°†å®ƒä»¬è®¾ä¸ºnull</li></ul><h4 id="5-åƒåœ¾å›æ”¶ä½¿ç”¨åœºæ™¯ä¼˜åŒ–"><a href="#5-åƒåœ¾å›æ”¶ä½¿ç”¨åœºæ™¯ä¼˜åŒ–" class="headerlink" title="5. åƒåœ¾å›æ”¶ä½¿ç”¨åœºæ™¯ä¼˜åŒ–"></a>5. åƒåœ¾å›æ”¶ä½¿ç”¨åœºæ™¯ä¼˜åŒ–</h4><ul><li><p>æ•°ç»„ä¼˜åŒ–</p><p>  å°†<code>ç©ºæ•°ç»„[]</code>èµ‹å€¼ç»™æ•°ç»„å¯¹è±¡æ˜¯æ¸…ç©ºæ•°ç»„çš„æ·å¾„ï¼Œä½†æ˜¯<code>ç©ºæ•°ç»„</code>ä¹Ÿä¼šå ç”¨å†…å­˜ã€‚å®é™…ä¸Š<code>array.length = 0</code>ä¹Ÿèƒ½æ¸…ç©ºæ•°ç»„ï¼Œå¹¶ä¸”åŒæ—¶èƒ½å®ç°æ•°ç»„é‡ç”¨ï¼Œå‡å°‘å†…å­˜åƒåœ¾äº§ç”Ÿ</p></li><li><p>å¯¹è±¡å°½é‡å¤ç”¨</p><p>  å¯¹è±¡å°½é‡å¤ç”¨ï¼Œä¸ç”¨çš„å¯¹è±¡å°½å¯èƒ½è®¾ç½®ä¸ºnullï¼Œå°½å¿«è¢«åƒåœ¾å›æ”¶æ‰</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Index Signature</title>
      <link href="/blog//Index-Signature/"/>
      <url>/blog//Index-Signature/</url>
      
        <content type="html"><![CDATA[<h2 id="Index-Signature"><a href="#Index-Signature" class="headerlink" title="Index Signature"></a><center>Index Signature</center></h2><h4 id="1-åºè¨€"><a href="#1-åºè¨€" class="headerlink" title="1. åºè¨€"></a>1. åºè¨€</h4><p>  ä½ æœ‰ä¸¤ä¸ªå¯¹è±¡ï¼Œåˆ†åˆ«æè¿°äº†ä¸¤ä¸ªå·¥ä½œäººå‘˜çš„å·¥èµ„ï¼š<br>  <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> salary1 = &#123;</span><br><span class="line">  <span class="attr">baseSalary</span>: <span class="number">10</span>,</span><br><span class="line">  <span class="attr">yearlyBonus</span>: <span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> salary2 = &#123;</span><br><span class="line">  <span class="attr">contractSalary</span>: <span class="number">11</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>  ä¹‹åï¼Œä½ æƒ³å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œæ ¹æ®å·¥ä½œäººå‘˜çš„å·¥èµ„ä¿¡æ¯å¾—åˆ°æ€»è–ªèµ„</p>  <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">totalSalary</span>(<span class="params">salaryObject: ???</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> total = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> name <span class="keyword">in</span> salaryObject) &#123;</span><br><span class="line">    total += salaryObject[name];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> total;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">totalSalary</span>(salary1); <span class="comment">// 30</span></span><br><span class="line"><span class="title function_">totalSalary</span>(salary2); <span class="comment">// 11</span></span><br></pre></td></tr></table></figure><p>  çœ‹èµ·æ¥å‡½æ•°ä¼¼ä¹å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œ<code>salaryObject</code>è¢«<code>typescript</code>æ¨æ–­ä¸ºanyï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä¼ å…¥ä»»ä½•å¯¹è±¡ã€‚å½“æˆ‘ä»¬ä¼ å…¥çš„å¯¹è±¡å€¼çš„ç±»å‹ä¸ä¸º<code>number</code>æ—¶ï¼Œæ­¤å‡½æ•°å°†ä¼šåœ¨è¿è¡Œæ—¶æŠ¥é”™ï¼ˆæ¯”å¦‚ï¼š<code>&#123; baseSalary: true &#125;</code>ï¼‰</p><p>  è¿™ä¸ªæ—¶å€™åº”è¯¥å¦‚æœå®šä¹‰<code>totalSalary</code>å‡½æ•°çš„å‚æ•°<code>totalSalary</code>çš„ç±»å‹æ³¨è§£å‘¢ï¼Ÿç­”æ¡ˆæ˜¯<code>Index Signature</code>ï¼ˆç´¢å¼•ç­¾åï¼‰ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•åœ¨<code>Typescript</code>ä¸­ä½¿ç”¨ç´¢å¼•ç­¾åï¼Œä»¥åŠä½•æ—¶éœ€è¦å®ƒ</p><h4 id="2-ä»€ä¹ˆæ˜¯ç´¢å¼•ç­¾åï¼Ÿ"><a href="#2-ä»€ä¹ˆæ˜¯ç´¢å¼•ç­¾åï¼Ÿ" class="headerlink" title="2. ä»€ä¹ˆæ˜¯ç´¢å¼•ç­¾åï¼Ÿ"></a>2. ä»€ä¹ˆæ˜¯ç´¢å¼•ç­¾åï¼Ÿ</h4><p>  å½“ä½ ä¸ç¡®å®šå¯¹è±¡å±æ€§çš„åç§°ï¼ŒåªçŸ¥é“å±æ€§å’Œå€¼çš„ç±»å‹ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨ç´¢å¼•ç­¾åæ¥æè¿°ã€‚</p><p>  æ¯”å¦‚<code>salaryObject</code>ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šå±æ€§çš„ç±»å‹ï¼ˆ<code>string</code>ï¼‰ã€å€¼çš„ç±»å‹ï¼ˆ<code>number</code>ï¼‰ï¼Œä½†æˆ‘ä»¬ä¸çŸ¥é“å…·ä½“çš„å±æ€§åã€‚ä¾¿å¯ä»¥ä½¿ç”¨ç´¢å¼•ç­¾åï¼š</p>  <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> salaryType = &#123;</span><br><span class="line">  [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  æ­¤ç±»å‹æè¿°äº†ä¸€ä¸ªä»¥å­—ç¬¦ä¸²ç±»å‹ä½œä¸ºå±æ€§ï¼Œæ•°å­—ç±»å‹ä½œä¸ºå€¼çš„å¯¹è±¡ã€‚å½“æˆ‘ä»¬ä¼ å…¥é<code>number</code>ç±»å‹çš„å±æ€§å€¼å¯¹è±¡æ—¶ï¼Œ<code>typescript</code>å°†ä¼šæç¤ºé”™è¯¯</p><h4 id="3-ç´¢å¼•ç­¾åè¯­æ³•"><a href="#3-ç´¢å¼•ç­¾åè¯­æ³•" class="headerlink" title="3. ç´¢å¼•ç­¾åè¯­æ³•"></a>3. ç´¢å¼•ç­¾åè¯­æ³•</h4><p>  ç´¢å¼•ç­¾åè¯­æ³•éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨æ–¹æ‹¬å·å†…å†™ä¸‹å±æ€§çš„ç±»å‹ï¼š<code>&#123; [key: keyType]: valueType &#125;</code>ï¼Œä¸€äº›ä¾‹å­ï¼š</p>  <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Is</span> = &#123;</span><br><span class="line">  [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Iss</span> = &#123;</span><br><span class="line">  [<span class="attr">key</span>: <span class="built_in">string</span> | <span class="built_in">number</span>]: <span class="built_in">string</span> | <span class="built_in">number</span></span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  åœ¨ç¬¬äºŒä¸ªä¾‹å­<code>Iss</code>ä¸­ï¼Œæˆ‘ä»¬è¿˜å®šä¹‰äº†ä¸€ä¸ª<code>name</code>å±æ€§ï¼Œæ ‡è¯†æ­¤ç±»å‹å¯¹è±¡ä¸Šå¿…é¡»è¦æœ‰ä¸€ä¸ª<code>name</code>å±æ€§ï¼Œä½†è¿™é‡Œæœ‰ä¸€ä¸ªé™åˆ¶ï¼Œç´¢å¼•ç­¾åå¼ºåˆ¶è¦æ±‚æ‰€æœ‰çš„å±æ€§å€¼å¿…é¡»ä¸ºç´¢å¼•ç­¾åçš„å±æ€§å€¼ç›¸åŒ¹é…ï¼ˆæˆ–å­ç±»å‹ï¼‰ï¼Œå¦åˆ™ï¼Œ<code>Typescript</code>å°†ä¼šæç¤ºé”™è¯¯ï¼š</p>  <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Iss</span> = &#123;</span><br><span class="line">  [<span class="attr">key</span>: <span class="built_in">string</span> | <span class="built_in">number</span>]: <span class="built_in">string</span> | <span class="built_in">number</span></span><br><span class="line">  ~~name~~: <span class="built_in">boolean</span> <span class="comment">// Error: Property &#x27;name&#x27; of type &#x27;boolean&#x27; is not assignable to &#x27;string&#x27; index type &#x27;string | number&#x27;.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  æ³¨æ„ï¼Œç´¢å¼•ç­¾åå±æ€§åªå…è®¸ä½¿ç”¨ï¼šstringã€numberã€symbolã€template stringï¼ˆæ¨¡æ¿å­—ç¬¦ä¸²ï¼‰ä»¥åŠåªåŒ…å«è¿™äº›ç±»å‹çš„è”åˆç±»å‹</p>  <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Is</span> = &#123;</span><br><span class="line">  [<span class="attr">key</span>: ~~<span class="built_in">boolean</span>~~]: <span class="built_in">string</span> <span class="comment">// Error: An index signature parameter type must be &#x27;string&#x27;, &#x27;number&#x27;, &#x27;symbol&#x27;, or a template literal type.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-ç´¢å¼•ç­¾åæ³¨æ„äº‹é¡¹"><a href="#4-ç´¢å¼•ç­¾åæ³¨æ„äº‹é¡¹" class="headerlink" title="4. ç´¢å¼•ç­¾åæ³¨æ„äº‹é¡¹"></a>4. ç´¢å¼•ç­¾åæ³¨æ„äº‹é¡¹</h4><ul><li><p>è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„å¯¹è±¡</p><p>å½“æˆ‘ä»¬è§†å›¾è®¿é—®ç´¢å¼•ç­¾å<code>&#123; [key: string]: string &#125;</code>å¯¹è±¡ä¸Šä¸å­˜åœ¨çš„å¯¹è±¡æ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Is</span> = &#123;</span><br><span class="line">  [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">obj</span>: <span class="title class_">Is</span> = &#123;&#125;</span><br><span class="line"></span><br><span class="line">obj.<span class="property">a</span> <span class="comment">// string</span></span><br></pre></td></tr></table></figure><p>æ­£å¦‚ç´¢å¼•ç­¾åå®šä¹‰çš„é‚£æ ·ï¼Œ<code>Typescript</code>å°†ä¼šæŠŠ<code>obj.a</code>æ¨æ–­ä¸º<code>string</code>ï¼Œä½†æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨è¿è¡Œæ—¶<code>obj.a</code>å®é™…ä¸º<code>undefined</code></p><p>ç´¢å¼•ç­¾ååªä¼šå°†å±æ€§ç±»å‹æ˜ å°„åˆ°å€¼ç±»å‹ï¼Œå€¼ç±»å‹å¯èƒ½ä¼šåç¦»å®é™…å…è®¸æ—¶çš„æ•°æ®ï¼Œè¿™éƒ¨åˆ†éœ€è¦æ ¹æ®å®é™…ä»£ç è‡ªè¡Œå¤„ç†ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å°†å€¼ç±»å‹å¢åŠ <code>undefined</code>ç±»å‹ï¼Œè¿™æ ·<code>Typescript</code>ä¼šæç¤ºä½ è®¿é—®çš„å±æ€§å¯èƒ½ä¸å­˜åœ¨ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Is</span> = &#123;</span><br><span class="line">  [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">string</span> | <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">obj</span>: <span class="title class_">Is</span> = &#123;&#125;</span><br><span class="line"></span><br><span class="line">obj.<span class="property">a</span> <span class="comment">// string | undefined</span></span><br></pre></td></tr></table></figure></li><li><p><code>string</code>å’Œ<code>number</code>ç±»å‹å±æ€§</p><p>  å½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªä»¥æ•°å­—ä¸º<code>key</code>çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å®šä¹‰ä¸ºï¼š<code>[key: string]: string</code>ï¼Œå¦‚ï¼š</p>  <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Is</span> = &#123;</span><br><span class="line">  [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">obj</span>: <span class="title class_">Is</span> = &#123;</span><br><span class="line">  <span class="number">1</span>: <span class="string">&#x27;one&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ä»¥é€šè¿‡ obj[&#x27;1&#x27;] æˆ– obj[1] è®¿é—®</span></span><br><span class="line"><span class="keyword">const</span> val1 = obj[<span class="string">&#x27;1&#x27;</span>]</span><br><span class="line"><span class="keyword">const</span> val2 = obj[<span class="number">1</span>]</span><br></pre></td></tr></table></figure><p>  ä¸ºä»€ä¹ˆæˆ‘ä»¬å®šä¹‰æ—¶<code>key</code>çš„ç±»å‹ä¸º<code>string</code>ï¼Œä½†ç¡®å¯ä»¥é€šè¿‡<code>number</code>è®¿é—®ï¼Œ<code>Typescript</code>ä¹Ÿä¸ä¼šæç¤ºé”™è¯¯å‘¢ï¼Ÿ</p><p>  å› ä¸º<code>JavaScript</code>åœ¨è®¿é—®å¯¹è±¡æ—¶ï¼Œä¼šéšå¼çš„å°†æ•°å­—å¼ºåˆ¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼ˆ<code>obj[1]</code>â†’ <code>obj[&#39;1&#39;]</code>ï¼‰ï¼Œè¿™æ„å‘³ç€è®¿é—®<code>obj[1]</code>å’Œ<code>obj[&#39;1&#39;]</code>æ˜¯ä¸€æ ·çš„ï¼Œ<code>Typescript</code>ä¹Ÿæ‰§è¡Œè¿™ç§éšå¼è½¬æ¢ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥åŒæ—¶å®šä¹‰ä¸¤ç§ç±»å‹çš„ç´¢å¼•ç­¾åï¼š</p>  <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Is</span> = &#123;</span><br><span class="line">  [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">string</span></span><br><span class="line">  [<span class="attr">index</span>: <span class="built_in">number</span>]: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  åŒæ ·ä¹Ÿè¦æ³¨æ„ï¼Œæ•°å­—ç±»å‹å±æ€§å€¼å¿…é¡»ä¸å­—ç¬¦ä¸²ç±»å‹å±æ€§å€¼çš„ç›¸åŒ¹é…ï¼ˆæˆ–å­ç±»å‹ï¼‰</p>  <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Is</span> = &#123;</span><br><span class="line">  [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">string</span> | <span class="built_in">number</span></span><br><span class="line">  [<span class="attr">index</span>: <span class="built_in">number</span>]: ~~<span class="built_in">boolean</span>~~ <span class="comment">// Error: &#x27;number&#x27; index type &#x27;boolean&#x27; is not assignable to &#x27;string&#x27; index type &#x27;string | number&#x27;.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="5-ç´¢å¼•ç­¾åä¸Record"><a href="#5-ç´¢å¼•ç­¾åä¸Record" class="headerlink" title="5. ç´¢å¼•ç­¾åä¸Record"></a>5. ç´¢å¼•ç­¾åä¸Record</h4><p>  <code>Typescript</code>æä¾›äº†ä¸€ä¸ªå®ç”¨ç±»å‹<code>Record</code>ï¼š</p>  <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">obj1</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; = &#123; <span class="attr">prop</span>: <span class="string">&#x27;Value&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">obj2</span>: &#123; [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">string</span> &#125; = &#123; <span class="attr">prop</span>: <span class="string">&#x27;Value&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><p>  å®ƒä¸ç´¢å¼•ç­¾åç±»ä¼¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åŒºåˆ†ä½•æ—¶ä½¿ç”¨ç´¢å¼•ç­¾åï¼Œä½•æ—¶ä½¿ç”¨<code>Record</code>å‘¢ï¼Ÿ</p><p>  æ­£å¦‚æˆ‘ä»¬å‰é¢æ‰€æåˆ°çš„ï¼Œç´¢å¼•ç­¾åå¯¹å±æ€§ç±»å‹å®šä¹‰å­˜åœ¨é™åˆ¶ï¼ˆç´¢å¼•ç­¾åå±æ€§ç±»å‹åªå…è®¸ï¼šstringã€numberã€symbolã€template stringï¼‰ã€‚å½“æˆ‘ä»¬å°è¯•åœ¨ç´¢å¼•ç­¾åå­—é¢é‡ç±»å‹æˆ–å­—é¢é‡è”åˆç±»å‹ï¼Œ<code>Typescript</code>å°†ä¼šæç¤ºé”™è¯¯ï¼š</p>  <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Is</span> = &#123;</span><br><span class="line">  [~~key~~: <span class="string">&#x27;name&#x27;</span> | <span class="string">&#x27;hobby&#x27;</span>]: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Error: An index signature parameter type cannot be a literal type or generic type. Consider using a mapped object type instead.</span></span><br></pre></td></tr></table></figure><p>  ä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>Record</code>å®šä¹‰ï¼š</p>  <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Is</span> = <span class="title class_">Record</span>&lt;<span class="string">&#x27;name&#x27;</span> | <span class="string">&#x27;hobby&#x27;</span>, <span class="built_in">string</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">obj</span>: <span class="title class_">Is</span> =  &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;lemon&#x27;</span>,</span><br><span class="line">  <span class="attr">hobby</span>: <span class="string">&#x27;program&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  æ‰€ä»¥ï¼Œå»ºè®®ä½¿ç”¨ç´¢å¼•ç­¾åæ¥æ³¨é‡Šé€šç”¨å¯¹è±¡ï¼ˆå½“æˆ‘ä»¬åªçŸ¥é“å±æ€§çš„ç±»å‹å’Œå±æ€§å€¼çš„ç±»å‹æ—¶ï¼‰ã€‚ä½†å½“æˆ‘ä»¬çŸ¥é“å…·ä½“çš„å±æ€§æ—¶ï¼Œå»ºè®®ä½¿ç”¨<code>Record&lt;keys, Type&gt;</code>æ¥æ³¨é‡Šç‰¹å®šå¯¹è±¡</p><h4 id="6-æ€»ç»“"><a href="#6-æ€»ç»“" class="headerlink" title="6. æ€»ç»“"></a>6. æ€»ç»“</h4><ul><li>ç´¢å¼•ç­¾åçš„è¯­æ³•ï¼š<code>[key: KeyType]: ValueType</code>ï¼Œå…¶ä¸­<code>KeyType</code>ç±»å‹åªå…è®¸ï¼š<code>stringã€numberã€symbolã€template string</code>ï¼Œè€Œ<code>ValueType</code>å¯ä»¥æ˜¯ä»»ä½•ç±»å‹</li><li>å½“ä½ ä¸çŸ¥é“è¦æ³¨é‡Šçš„å¯¹è±¡çš„å…·ä½“ç»“æ„ï¼ˆå…·ä½“çš„å±æ€§åï¼‰ï¼Œä½†ä½ çŸ¥é“å±æ€§åçš„ç±»å‹å’Œå±æ€§å€¼çš„ç±»å‹ï¼Œé‚£ä½ å¯èƒ½éœ€è¦çš„å°±æ˜¯ç´¢å¼•ç­¾å</li></ul>]]></content>
      
      
      <categories>
          
          <category> Typescript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>new.target</title>
      <link href="/blog//new-target/"/>
      <url>/blog//new-target/</url>
      
        <content type="html"><![CDATA[<h2 id="new-target"><a href="#new-target" class="headerlink" title="new.target"></a><center>new.target</center></h2><h4 id="1-å®šä¹‰"><a href="#1-å®šä¹‰" class="headerlink" title="1. å®šä¹‰"></a>1. å®šä¹‰</h4><blockquote><p><code>new.target</code>å±æ€§ï¼ˆES6å¼•å…¥ï¼‰å…è®¸ä½ æ£€æµ‹å‡½æ•°æˆ–æ„é€ æ–¹æ³•æ˜¯å¦é€šè¿‡<code>new</code>è¿ç®—ç¬¦è¿›è¡Œè°ƒç”¨ã€‚é€šè¿‡newè¿ç®—ç¬¦è¢«åˆå§‹åŒ–çš„å‡½æ•°æˆ–æ„é€ æ–¹æ³•æ—¶ï¼Œ<code>new.target</code>è¿”å›ä¸€ä¸ªæŒ‡å‘æ„é€ æ–¹æ³•æˆ–å‡½æ•°çš„å¼•ç”¨ï¼Œåœ¨æ™®é€šçš„å‡½æ•°è°ƒç”¨ä¸­ï¼Œ<code>new.target</code>è¿”å›<code>undefined</code></p></blockquote><p>  æ³¨æ„ï¼š</p><ul><li>åœ¨<code>arrow function</code>ä¸­ï¼Œæ²¡æœ‰è‡ªå·±çš„<code>this</code>ã€<code>arguments</code>ã€<code>super</code>ã€<code>new.target</code>ï¼Œ<code>new.target</code>æŒ‡å‘æœ€è¿‘çš„å¤–å±‚å‡½æ•°çš„<code>new.target</code></li><li>åœ¨å­ç±»ç»§æ‰¿çˆ¶ç±»æ—¶ï¼Œ<code>new.target</code>æŒ‡å‘åˆå§‹åŒ–ç±»çš„ç±»å®šä¹‰ï¼Œå³å­ç±»</li></ul><h4 id="2-åœ¨ES5ä¸­å¦‚ä½•é™åˆ¶å‡½æ•°é€šè¿‡newè¿ç®—ç¬¦è°ƒç”¨"><a href="#2-åœ¨ES5ä¸­å¦‚ä½•é™åˆ¶å‡½æ•°é€šè¿‡newè¿ç®—ç¬¦è°ƒç”¨" class="headerlink" title="2. åœ¨ES5ä¸­å¦‚ä½•é™åˆ¶å‡½æ•°é€šè¿‡newè¿ç®—ç¬¦è°ƒç”¨"></a>2. åœ¨ES5ä¸­å¦‚ä½•é™åˆ¶å‡½æ•°é€šè¿‡<code>new</code>è¿ç®—ç¬¦è°ƒç”¨</h4><ul><li><p>é€šè¿‡<code>new</code>è¿ç®—ç¬¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œ<code>this</code>å°†æŒ‡å‘æ„é€ å‡½æ•°å®ä¾‹</p></li><li><p>æ™®é€šè°ƒç”¨å‡½æ•°ï¼Œéä¸¥æ ¼æ¨¡å¼<code>this</code>æŒ‡å‘<code>window</code>ï¼Œä¸¥æ ¼æ¨¡å¼æŒ‡å‘<code>undefined</code></p>  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Instance</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="variable language_">this</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ™®é€šè°ƒç”¨</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Instance</span>())  <span class="comment">// WindowÂ &#123;...&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡newè°ƒç”¨</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title class_">Instance</span>()) <span class="comment">// InstanceÂ &#123;&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ¤æ–­<code>this</code>æ˜¯å¦å½“å‰æ„é€ å‡½æ•°çš„å®ä¾‹ï¼Œæ¥åˆ¤æ–­æ˜¯å¦é€šè¿‡<code>new</code>è¿ç®—ç¬¦è°ƒç”¨ï¼Œä½¿ç”¨<code>this instanceof [æ„é€ å‡½æ•°]</code>ï¼Œé€šè¿‡<code>new</code>è°ƒç”¨è¿”å›<code>true</code>ï¼Œæ™®é€šè°ƒç”¨è¿”å›<code>false</code></p>  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Instance</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ä¸å»ºè®®ä½¿ç”¨ arguments.callee.nameï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹argumentså±æ€§è¢«ç§»é™¤</span></span><br><span class="line">  <span class="keyword">if</span>(!(<span class="variable language_">this</span> <span class="keyword">instanceof</span> <span class="title class_">Instance</span>)) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">&quot;Failed to construct &#x27;Instance&#x27;: Please use the &#x27;new&#x27; operator, this DOM object constructor cannot be called as a function.&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ™®é€šè°ƒç”¨</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Instance</span>()  <span class="comment">// Uncaught TypeError: ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡newè°ƒç”¨</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title class_">Instance</span>()) <span class="comment">// InstanceÂ &#123;&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>ä½†é€šè¿‡æ­¤æ–¹æ³•åˆ¤æ–­å¹¶ä¸å®Œå…¨å‡†ç¡®ï¼Œå¦‚æœè°ƒç”¨æ—¶é€šè¿‡<code>apply</code>&#x2F;<code>call</code>&#x2F;<code>bind</code>æ”¹å˜<code>this</code>æŒ‡å‘ï¼Œå°†<code>this</code>æŒ‡å‘æ„é€ å‡½æ•°å®ä¾‹ï¼Œä»¥ä¸Šæ–¹æ³•å°†æ— æ•ˆ</p>  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Instance</span>.<span class="title function_">call</span>(<span class="keyword">new</span> <span class="title class_">Instance</span>()))  <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="3-new-target"><a href="#3-new-target" class="headerlink" title="3. new.target"></a>3. new.target</h4><ul><li><p>é€šè¿‡<code>new</code>è¿ç®—ç¬¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œ<code>new.target</code>æŒ‡å‘æ„é€ æ–¹æ³•æˆ–å‡½æ•°çš„å¼•ç”¨</p></li><li><p>æ™®é€šè°ƒç”¨å‡½æ•°ï¼Œ<code>new.target</code>æŒ‡å‘<code>undefined</code></p>  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Instance</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="keyword">new</span>.<span class="property">target</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ™®é€šè°ƒç”¨</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Instance</span>())  <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡newè°ƒç”¨</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title class_">Instance</span>()) <span class="comment">// Instance() &#123; return new.target &#125;</span></span><br></pre></td></tr></table></figure></li><li><p>å› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>new.target</code>æ¥é™åˆ¶æ„é€ å‡½æ•°å¿…é¡»é€šè¿‡<code>new</code>è¿ç®—ç¬¦è°ƒç”¨</p>  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Instance</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(!<span class="keyword">new</span>.<span class="property">target</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">&quot;Failed to construct &#x27;Instance&#x27;: Please use the &#x27;new&#x27; operator, this DOM object constructor cannot be called as a function.&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ™®é€šè°ƒç”¨</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Instance</span>())  <span class="comment">// Uncaught TypeError: ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¹å˜thisæŒ‡å‘</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Instance</span>.<span class="title function_">call</span>(<span class="keyword">new</span> <span class="title class_">Instance</span>())) <span class="comment">// Uncaught TypeError: ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡newè°ƒç”¨</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title class_">Instance</span>()) <span class="comment">// Instance() &#123; return new.target &#125;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="4-ä½¿ç”¨new-targetæ¨¡æ‹Ÿå®ç°æŠ½è±¡ç±»"><a href="#4-ä½¿ç”¨new-targetæ¨¡æ‹Ÿå®ç°æŠ½è±¡ç±»" class="headerlink" title="4. ä½¿ç”¨new.targetæ¨¡æ‹Ÿå®ç°æŠ½è±¡ç±»"></a>4. ä½¿ç”¨<code>new.target</code>æ¨¡æ‹Ÿå®ç°æŠ½è±¡ç±»</h4><ul><li><p>å› ä¸ºå½“å­ç±»ç»§æ‰¿çˆ¶ç±»æ—¶ï¼Œ<code>new.target</code>æŒ‡å‘åˆå§‹åŒ–ç±»çš„ç±»å®šä¹‰</p>  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">P</span> &#123; <span class="title function_">constructor</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span>.<span class="property">target</span>) &#125; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">S</span> <span class="keyword">extends</span> <span class="title class_ inherited__">P</span> &#123; <span class="title function_">constructor</span>(<span class="params"></span>) &#123; <span class="variable language_">super</span>() &#125; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title function_">P</span>() <span class="comment">// class P &#123; constructor() &#123; console.log(new.target) &#125; &#125;</span></span><br><span class="line"><span class="keyword">new</span> <span class="title function_">S</span>() <span class="comment">// class S extends P &#123; constructor() &#123; super() &#125; &#125;</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ©ç”¨è¿™ä¸€ç‰¹æ€§ï¼Œå¯ä»¥æ¨¡æ‹Ÿå®ç°æŠ½è±¡ç±»</p>  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">P</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">new</span>.<span class="property">target</span> === P) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SyntaxError</span>(<span class="string">&#x27;Cannot create an instance of an abstract class.&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">S</span> <span class="keyword">extends</span> <span class="title class_ inherited__">P</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title function_">P</span>()) <span class="comment">// Uncaught SyntaxError: Cannot create an instance of an abstract class.</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title function_">S</span>()) <span class="comment">// SÂ &#123;&#125;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="5-æ€»ç»“"><a href="#5-æ€»ç»“" class="headerlink" title="5. æ€»ç»“"></a>5. æ€»ç»“</h4><ul><li>åœ¨ES5ä¸­ï¼Œé€šè¿‡<code>new</code>è¿ç®—ç¬¦è°ƒç”¨æ—¶<code>this</code>æŒ‡å‘æ„é€ å‡½æ•°å®ä¾‹ï¼Œæ™®é€šè°ƒç”¨æ—¶<code>this</code>åœ¨éä¸¥æ ¼æ¨¡å¼æŒ‡å‘<code>window</code>ï¼Œä¸¥æ ¼æ¨¡å¼æŒ‡å‘<code>undefined</code>ï¼Œåˆ©ç”¨è¿™ä¸€ç‰¹æ€§ï¼Œç»“åˆ<code>this instanceof [æ„é€ å‡½æ•°]</code>ï¼Œå¯ä»¥åˆ¤æ–­æ˜¯å¦é€šè¿‡<code>new</code>è¿ç®—ç¬¦è°ƒç”¨æ„é€ å‡½æ•°ï¼Œä½†æ­¤æ–¹æ³•å¹¶ä¸å®‰å…¨ï¼Œå¯ä»¥é€šè¿‡<code>apply</code>&#x2F;<code>call</code>&#x2F;<code>bind</code>æ”¹å˜<code>this</code>æŒ‡å‘</li><li>åœ¨ES6ä¸­ï¼Œå¼•å…¥<code>new.target</code>å±æ€§ï¼Œé€šè¿‡<code>new</code>è¿ç®—ç¬¦è°ƒç”¨æ—¶<code>new.target</code>æŒ‡å‘æ„é€ æ–¹æ³•æˆ–å‡½æ•°çš„å¼•ç”¨ï¼Œæ™®é€šè°ƒç”¨å‡½æ•°ï¼Œ<code>new.target</code>æŒ‡å‘<code>undefined</code>ï¼Œå¯ä»¥é€šè¿‡æ­¤å±æ€§åˆ¤æ–­æ˜¯å¦é€šè¿‡<code>new</code>è¿ç®—ç¬¦è°ƒç”¨æ„é€ å‡½æ•°</li><li>åˆ©ç”¨<code>new.target</code>å±æ€§ï¼Œå¯ä»¥æ¨¡æ‹Ÿå®ç°æŠ½è±¡ç±»</li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Preflight request</title>
      <link href="/blog//Preflight-request/"/>
      <url>/blog//Preflight-request/</url>
      
        <content type="html"><![CDATA[<h2 id="Preflight-requestï¼ˆé¢„æ£€è¯·æ±‚ï¼‰"><a href="#Preflight-requestï¼ˆé¢„æ£€è¯·æ±‚ï¼‰" class="headerlink" title="Preflight requestï¼ˆé¢„æ£€è¯·æ±‚ï¼‰"></a><center>Preflight requestï¼ˆé¢„æ£€è¯·æ±‚ï¼‰</center></h2><h4 id="1-ä»€ä¹ˆæ˜¯é¢„æ£€è¯·æ±‚ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯é¢„æ£€è¯·æ±‚ï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯é¢„æ£€è¯·æ±‚ï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯é¢„æ£€è¯·æ±‚ï¼Ÿ</h4><blockquote><p>ä¸€ä¸ª<code>CORS</code>é¢„æ£€è¯·æ±‚æ˜¯ç”¨äºæ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ”¯æŒ<code>CORS</code>ï¼ˆè·¨åŸŸèµ„æºå…±äº«ï¼‰ï¼Œç”±æµè§ˆå™¨è‡ªåŠ¨é€šè¿‡<code>OPTIONS</code>æ–¹æ³•å‘èµ·ï¼ˆ<strong>éç®€å•è¯·æ±‚</strong>æ‰ä¼šå‘èµ·é¢„æ£€è¯·æ±‚ï¼‰ã€‚å½“é¢„æ£€è¯·æ±‚å®Œæˆï¼ŒæœåŠ¡å™¨ç¡®è®¤å…è®¸åï¼Œæ‰å‘èµ·å®é™…çš„HTTPè¯·æ±‚ã€‚</p></blockquote><h4 id="2-ç®€å•è¯·æ±‚ä¸éç®€å•è¯·æ±‚"><a href="#2-ç®€å•è¯·æ±‚ä¸éç®€å•è¯·æ±‚" class="headerlink" title="2. ç®€å•è¯·æ±‚ä¸éç®€å•è¯·æ±‚"></a>2. ç®€å•è¯·æ±‚ä¸éç®€å•è¯·æ±‚</h4><ul><li><p>ç®€å•è¯·æ±‚</p><ul><li>è¯·æ±‚æ–¹æ³•ï¼š<ul><li>GET</li><li>HEAD</li><li>POST</li></ul></li><li>è¯·æ±‚é¦–éƒ¨å­—æ®µåªåŒ…å«ï¼š<ul><li>Accept</li><li>Accept-Language</li><li>Content-Language</li><li>Content-Type<ul><li>text&#x2F;plain</li><li>multipart&#x2F;form-data</li><li>application&#x2F;x-www-form-urlencoded</li></ul></li></ul></li><li>å¦‚æœè¯·æ±‚æ˜¯ä½¿ç”¨XMLHttpRequestå¯¹è±¡å‘å‡ºçš„ï¼Œåœ¨è¿”å›çš„XMLHttpRequest.uploadå¯¹è±¡å±æ€§ä¸Šæ²¡æœ‰æ³¨å†Œä»»ä½•äº‹ä»¶ç›‘å¬å™¨ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œç»™å®šä¸€ä¸ªXMLHttpRequestå®ä¾‹xhrï¼Œæ²¡æœ‰è°ƒç”¨xhr.upload.addEventListener()ï¼Œä»¥ç›‘å¬è¯¥ä¸Šä¼ è¯·æ±‚</li><li>è¯·æ±‚ä¸­æ²¡æœ‰ä½¿ç”¨ReadableStreamå¯¹è±¡</li></ul></li><li><p>éç®€å•è¯·æ±‚</p><ul><li>ä¸æ»¡è¶³ç®€å•è¯·æ±‚çš„éƒ½æ˜¯éç®€å•è¯·æ±‚</li></ul></li></ul><h4 id="3-é¢„æ£€è¯·æ±‚ä¸­çš„è¯·æ±‚é¦–éƒ¨å­—æ®µ"><a href="#3-é¢„æ£€è¯·æ±‚ä¸­çš„è¯·æ±‚é¦–éƒ¨å­—æ®µ" class="headerlink" title="3. é¢„æ£€è¯·æ±‚ä¸­çš„è¯·æ±‚é¦–éƒ¨å­—æ®µ"></a>3. é¢„æ£€è¯·æ±‚ä¸­çš„è¯·æ±‚é¦–éƒ¨å­—æ®µ</h4><ul><li>Originï¼šè¯·æ±‚æºURLï¼ˆä¸åŒ…å«è·¯å¾„ï¼‰</li><li>Access-Control-Request-Methodï¼šå®é™…è¯·æ±‚æ‰€ä½¿ç”¨çš„HTTPæ–¹æ³•</li><li>Access-Control-Request-Headersï¼šå®é™…è¯·æ±‚æ—¶æºå¸¦çš„è‡ªå®šä¹‰é¦–éƒ¨å­—æ®µ</li></ul><img src="/blog/Preflight-request/request-header.png" class="" title="Preflight request header"><h4 id="4-é¢„è§è¯·æ±‚ä¸­çš„å“åº”é¦–éƒ¨å­—æ®µ"><a href="#4-é¢„è§è¯·æ±‚ä¸­çš„å“åº”é¦–éƒ¨å­—æ®µ" class="headerlink" title="4. é¢„è§è¯·æ±‚ä¸­çš„å“åº”é¦–éƒ¨å­—æ®µ"></a>4. é¢„è§è¯·æ±‚ä¸­çš„å“åº”é¦–éƒ¨å­—æ®µ</h4><ul><li>Access-Control-Allow-Originï¼šå…è®¸è¯¥æºè®¿é—®èµ„æºåœ°å€ï¼Œå¯ä»¥ä½¿ç”¨<code>*</code>é€šé…ç¬¦ï¼Œè¡¨ç¤ºä»»æ„æºï¼ˆä»…å½“ä¸éœ€è¦æºå¸¦<code>Cookie</code>æ—¶ï¼Œå¦‚æœæºå¸¦<code>Cookie</code>ï¼Œå¿…é¡»æŒ‡å®šå…·ä½“çš„æºåœ°å€ï¼Œå¦åˆ™å°†ä¼šè¯·æ±‚å¤±è´¥ï¼‰</li><li>Access-Control-Allow-Methodsï¼šå…è®¸ä½¿ç”¨çš„HTTPæ–¹æ³•</li><li>Access-Control-Allow-Headersï¼šå…è®¸ä½¿ç”¨çš„è¯·æ±‚é¦–éƒ¨å­—æ®µ</li><li>Access-Control-Allow-Credentialsï¼šæ˜¯å¦å…è®¸æºå¸¦Cookie</li><li>Access-Control-Expose-Headersï¼š<code>XMLHttpRequest</code>å¯¹è±¡çš„Â <code>getResponseHeader()</code>æ–¹æ³•åªèƒ½æ‹¿åˆ°ä¸€äº›æœ€åŸºæœ¬çš„å“åº”å¤´ï¼ŒCache-Controlã€Content-Languageã€Content-Typeã€Expiresã€Last-Modifiedã€Pragmaï¼Œå¦‚æœè¦è®¿é—®å…¶ä»–å¤´ï¼Œåˆ™éœ€è¦æœåŠ¡å™¨è®¾ç½®æœ¬å“åº”å¤´</li><li>Access-Control-Max-Ageï¼šæŒ‡å®šé¢„æ£€è¯·æ±‚ç¼“å­˜æ—¶é—´ï¼Œå•ä½ä¸ºç§’ï¼Œé»˜è®¤5ç§’</li></ul><img src="/blog/Preflight-request/response-header.png" class="" title="Preflight response header"><h4 id="5-å®Œæ•´è¯·æ±‚æµç¨‹å›¾"><a href="#5-å®Œæ•´è¯·æ±‚æµç¨‹å›¾" class="headerlink" title="5. å®Œæ•´è¯·æ±‚æµç¨‹å›¾"></a>5. å®Œæ•´è¯·æ±‚æµç¨‹å›¾</h4><img src="/blog/Preflight-request/request-flow.png" class="" title="request flow">]]></content>
      
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
            <tag> æµè§ˆå™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨å†…ç½®ç¬¦å·(well-known symbol)</title>
      <link href="/blog//%E5%B8%B8%E7%94%A8%E5%86%85%E7%BD%AE%E7%AC%A6%E5%8F%B7-well-known-symbol/"/>
      <url>/blog//%E5%B8%B8%E7%94%A8%E5%86%85%E7%BD%AE%E7%AC%A6%E5%8F%B7-well-known-symbol/</url>
      
        <content type="html"><![CDATA[<h2 id="å¸¸ç”¨å†…ç½®ç¬¦å·-well-known-symbol"><a href="#å¸¸ç”¨å†…ç½®ç¬¦å·-well-known-symbol" class="headerlink" title="å¸¸ç”¨å†…ç½®ç¬¦å·(well-known symbol)"></a><center>å¸¸ç”¨å†…ç½®ç¬¦å·(well-known symbol)</center></h2><p>  ES6å¼•å…¥äº†ä¸€æ‰¹å¸¸ç”¨å†…ç½®ç¬¦åˆï¼ˆwell-known symbolï¼‰ç”¨äºæš´éœ²è¯­è¨€å†…éƒ¨è¡Œä¸ºï¼Œå¼€å‘è€…å¯ä»¥ç›´æ¥è®¿é—®ã€é‡å†™æˆ–æ¨¡æ‹Ÿè¿™äº›è¡Œä¸º</p><ul><li>å†…ç½®ç¬¦å·ä»¥Symbolå·¥å‚å‡½æ•°å­—ç¬¦ä¸²å±æ€§çš„å½¢å¼å­˜åœ¨</li><li>å†…ç½®ç¬¦å·çš„ä¸»è¦ç”¨é€”ä¹‹ä¸€æ˜¯<strong>é‡æ–°å®šä¹‰</strong>ï¼Œä»è€Œæ”¹å˜åŸç”Ÿç»“æ„çš„è¡Œä¸º</li><li>å†…ç½®ç¬¦å·æ²¡æœ‰ç‰¹åˆ«ä¹‹å¤„ï¼Œå®ƒä»¬å°±æ˜¯å…¨å±€å‡½æ•°Symbolçš„æ™®é€šå­—ç¬¦ä¸²å±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªç¬¦å·çš„å®ä¾‹</li><li><strong>æ‰€æœ‰å†…ç½®ç¬¦å·å±æ€§éƒ½æ˜¯ä¸å¯å†™ï¼ˆwriteable: falseï¼‰ï¼Œä¸å¯æšä¸¾ï¼ˆenumerable: falseï¼‰ï¼Œä¸å¯é…ç½®ï¼ˆconfigurable: falseï¼‰</strong></li></ul><p>  <strong>ç›®å‰å…¬æœ‰13ä¸ªå†…ç½®ç¬¦å·</strong></p><h4 id="Symbol-Iterator"><a href="#Symbol-Iterator" class="headerlink" title="Symbol.Iterator"></a><strong><code>Symbol.Iterator</code></strong></h4><p>  <code>Symbol.iterator</code>ä¸ºæ¯ä¸€ä¸ªå¯¹è±¡å®šä¹‰äº†é»˜è®¤çš„è¿­ä»£å™¨ã€‚</p><p>  ç¤ºä¾‹ï¼š</p><pre><code><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Range</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">max</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">max</span> = max</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">idx</span> = <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  *[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() &#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="variable language_">this</span>.<span class="property">idx</span> &lt; <span class="variable language_">this</span>.<span class="property">max</span>) &#123;</span><br><span class="line">      <span class="keyword">yield</span> <span class="variable language_">this</span>.<span class="property">idx</span>++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> range = <span class="keyword">new</span> <span class="title class_">Range</span>(<span class="number">5</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(...range) <span class="comment">// 0 1 2 3 4</span></span><br></pre></td></tr></table></figure></code></pre><p>  ä¸€äº›æ‹¥æœ‰é»˜è®¤å®šä¹‰è¿­ä»£å™¨çš„å†…ç½®ç±»å‹ï¼š**<code>Array</code>ã€<code>TypedArray</code>ã€<code>String</code>ã€<code>Map</code>ã€<code>Set</code>**</p><h4 id="Symbol-asyncIterator"><a href="#Symbol-asyncIterator" class="headerlink" title="Symbol.asyncIterator"></a><strong><code>Symbol.asyncIterator</code></strong></h4><p>  <code>Symbol.asyncIterator</code>ç¬¦å·æŒ‡å®šäº†ä¸€ä¸ªå¯¹è±¡çš„é»˜è®¤å¼‚æ­¥è¿­ä»£å™¨</p><p>  ç¤ºä¾‹ï¼š</p><pre><code><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Range</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">max</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">max</span> = max</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">idx</span> = <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> *[<span class="title class_">Symbol</span>.<span class="property">asyncIterator</span>]() &#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="variable language_">this</span>.<span class="property">idx</span> &lt; <span class="variable language_">this</span>.<span class="property">max</span>) &#123;</span><br><span class="line">      <span class="keyword">yield</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="variable language_">this</span>.<span class="property">idx</span>++)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">for</span> <span class="title function_">await</span>(<span class="params"><span class="keyword">const</span> r <span class="keyword">of</span> <span class="keyword">new</span> Range(<span class="number">5</span>)</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(r) <span class="comment">// 0 1 2 3 4</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure></code></pre><h4 id="Symbol-hasInstance"><a href="#Symbol-hasInstance" class="headerlink" title="Symbol.hasInstance"></a><strong><code>Symbol.hasInstance</code></strong></h4><p>  <code>Symbol.hasInstance</code>ç”¨äºåˆ¤æ–­æŸå¯¹è±¡æ˜¯å¦ä¸ºæŸæ„é€ å™¨çš„å®ä¾‹ã€‚å› æ­¤ä½ å¯ä»¥ç”¨å®ƒè‡ªå®šä¹‰Â <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/instanceof"><code>instanceof</code></a>æ“ä½œç¬¦åœ¨æŸä¸ªç±»ä¸Šçš„è¡Œä¸ºã€‚</p><p>  ES6ä¸­ï¼Œ<code>instanceof</code>æ“ä½œç¬¦ä¼šä½¿ç”¨<code>Symbol.hasInstance</code>å‡½æ•°æ¥ç¡®å®šå…³ç³»ï¼Œæ‰€ä»¥ç›´æ¥è°ƒç”¨<code>Symbol.hasInstance</code>ä¸ä½¿ç”¨<code>instanceof</code>æ“ä½œç¬¦æ˜¯ä¸€æ ·çš„</p><pre><code><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = []</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>[<span class="title class_">Symbol</span>.<span class="property">hasInstance</span>](a)) <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a <span class="keyword">instanceof</span> <span class="title class_">Array</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>  </code></pre><p>  <code>Symbol.hasInstance</code>å±æ€§å®šä¹‰åœ¨<code>Function</code>åŸå‹ä¸Šï¼Œå› æ­¤é»˜è®¤æ‰€æœ‰å‡½æ•°å’Œç±»ä¸Šéƒ½å¯ä»¥ä½¿ç”¨ã€‚ä¹Ÿå¯ä»¥åœ¨ç±»ä¸Š<strong>é€šè¿‡é™æ€æ–¹æ³•é‡æ–°å®šä¹‰</strong>è¿™ä¸ªå‡½æ•°</p><p>  <code>Symbol.hasInstance</code>è¿”å›ä¸€ä¸ª<code>Boolean</code>, å¦‚æœè¿”å›çš„ä¸æ˜¯<code>Boolean</code>, ä¼šå°†<code>Flasy</code>è½¬æ¢ä¸º<code>false</code>, å…¶ä½™ä¸º<code>true</code></p><pre><code>  <figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Surpass10</span> &#123;</span><br><span class="line">  <span class="comment">// æ³¨æ„è¦ä½¿ç”¨é™æ€æ–¹æ³•ï¼Œå¦åˆ™æ— æ³•è®¿é—®åˆ°æ­¤æ–¹æ³•</span></span><br><span class="line">  <span class="comment">// Symbol.hasInstanceè¿”å›ä¸€ä¸ªBoolean, å¦‚æœè¿”å›çš„ä¸æ˜¯Boolean, ä¼šå°†Flasyè½¬æ¢ä¸ºfalse, å…¶ä½™ä¸ºtrue</span></span><br><span class="line">  <span class="keyword">static</span> [<span class="title class_">Symbol</span>.<span class="property">hasInstance</span>](value) &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title class_">Number</span>.<span class="built_in">isFinite</span>(value) &amp;&amp; value &gt; <span class="number">10</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">12</span> <span class="keyword">instanceof</span> <span class="title class_">Surpass10</span>) <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">7</span> <span class="keyword">instanceof</span> <span class="title class_">Surpass10</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure></code></pre><h4 id="Symbol-isConcatSpreadable"><a href="#Symbol-isConcatSpreadable" class="headerlink" title="Symbol.isConcatSpreadable"></a><strong><code>Symbol.isConcatSpreadable</code></strong></h4><p>  <code>Symbol.isConcatSpreadable</code>ç¬¦å·ç”¨äºé…ç½®æŸå¯¹è±¡ä½œä¸º<code>Array.prototype.concat()</code>æ–¹æ³•çš„å‚æ•°æ—¶æ˜¯å¦å±•å¼€å…¶æ•°ç»„å…ƒç´ </p><p>  æ•°ç»„é»˜è®¤<code>true</code>ï¼Œç±»æ•°ç»„ï¼ˆ<code>ArrayLike</code>ï¼‰é»˜è®¤<code>false</code></p><pre><code><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">const</span> b = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">concat</span>(b)) <span class="comment">// [ 1, 2, 3, 3, 4, 5 ]</span></span><br><span class="line"></span><br><span class="line">b[<span class="title class_">Symbol</span>.<span class="property">isConcatSpreadable</span>] = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">concat</span>(b)) <span class="comment">// [ 1, 2, 3, [ 3, 4, 5, [Symbol(Symbol.isConcatSpreadable)]: false ] ]</span></span><br></pre></td></tr></table></figure></code></pre><h4 id="Symbol-match"><a href="#Symbol-match" class="headerlink" title="Symbol.match"></a><strong><code>Symbol.match</code></strong></h4><p>  <code>Symbol.match</code>æŒ‡å®šäº†åŒ¹é…çš„æ˜¯æ­£åˆ™è¡¨è¾¾å¼è€Œä¸æ˜¯å­—ç¬¦ä¸²ã€‚<code>String.prototype.match()</code>æ–¹æ³•ä¼šè°ƒç”¨æ­¤å‡½æ•°</p><pre><code><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">FooMatcher</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> [<span class="title class_">Symbol</span>.<span class="property">match</span>](target) &#123;</span><br><span class="line">    <span class="comment">// String.includes ç”¨äºæŸ¥æ‰¾å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«æ­¤å­—ç¬¦ä¸²ï¼Œè¿”å›å¸ƒå°”å€¼</span></span><br><span class="line">    <span class="keyword">return</span> target.<span class="title function_">includes</span>(<span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;foobar&#x27;</span>.<span class="title function_">match</span>(<span class="title class_">FooMatcher</span>)); <span class="comment">// true </span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;barbaz&#x27;</span>.<span class="title function_">match</span>(<span class="title class_">FooMatcher</span>)); <span class="comment">// false </span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* é‡æ–°å®šä¹‰Symbol.match() å‡½æ•° */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StringMatcher</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">str</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">str</span> = str</span><br><span class="line">  &#125;</span><br><span class="line">  [<span class="title class_">Symbol</span>.<span class="property">match</span>](target) &#123;</span><br><span class="line">    <span class="keyword">return</span> target.<span class="title function_">includes</span>(<span class="variable language_">this</span>.<span class="property">str</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€ä¸ªStringä¸ºæ€»å­—ç¬¦ä¸²ï¼Œç¬¬äºŒä¸ªStringä¸ºè¦æŸ¥æ‰¾çš„å­—ç¬¦</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;foobar&#x27;</span>.<span class="title function_">match</span>(<span class="keyword">new</span> <span class="title class_">StringMatcher</span>(<span class="string">&#x27;foo&#x27;</span>))); <span class="comment">// true </span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;barbaz&#x27;</span>.<span class="title function_">match</span>(<span class="keyword">new</span> <span class="title class_">StringMatcher</span>(<span class="string">&#x27;qux&#x27;</span>))); <span class="comment">// false</span></span><br></pre></td></tr></table></figure></code></pre><h4 id="Symbol-matchAll"><a href="#Symbol-matchAll" class="headerlink" title="Symbol.matchAll"></a><strong><code>Symbol.matchAll</code></strong></h4><p>  <code>String.prototype.matchAll()</code>æ–¹æ³•ä¼šè°ƒç”¨æ­¤å‡½æ•°</p><pre><code><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">&quot;2016-01-02|2019-03-07&quot;</span></span><br><span class="line"><span class="keyword">const</span> numbers = &#123;</span><br><span class="line">  *[<span class="title class_">Symbol</span>.<span class="property">matchAll</span>](str) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> n <span class="keyword">of</span> str.<span class="title function_">matchAll</span>(<span class="regexp">/[0-9]+/g</span>)) <span class="keyword">yield</span> n[<span class="number">0</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(str.<span class="title function_">matchAll</span>(numbers))) <span class="comment">// [ &#x27;2016&#x27;, &#x27;01&#x27;, &#x27;02&#x27;, &#x27;2019&#x27;, &#x27;03&#x27;, &#x27;07&#x27; ]</span></span><br></pre></td></tr></table></figure></code></pre><h4 id="Symbol-replace"><a href="#Symbol-replace" class="headerlink" title="Symbol.replace"></a><strong><code>Symbol.replace</code></strong></h4><p>  <code>Symbol.replace</code>è¿™ä¸ªå±æ€§æŒ‡å®šäº†å½“ä¸€ä¸ªå­—ç¬¦ä¸²æ›¿æ¢æ‰€åŒ¹é…å­—ç¬¦ä¸²æ—¶æ‰€è°ƒç”¨çš„æ–¹æ³•ã€‚<code>String.prototype.replace()</code>æ–¹æ³•ä¼šè°ƒç”¨æ­¤æ–¹æ³•</p><p>  <code>Symbol.replace</code>æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œè°ƒç”¨ replace()æ–¹æ³•çš„å­—ç¬¦ä¸²å®ä¾‹å’Œæ›¿æ¢å­—ç¬¦ä¸²</p><pre><code><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Replace1</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">value</span> = value</span><br><span class="line">  &#125;</span><br><span class="line">  [<span class="title class_">Symbol</span>.<span class="property">replace</span>](<span class="built_in">string</span>, replace) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`s/<span class="subst">$&#123;<span class="built_in">string</span>&#125;</span>/<span class="subst">$&#123;<span class="variable language_">this</span>.value&#125;</span>/<span class="subst">$&#123;replace&#125;</span>/g`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;foo&#x27;</span>.<span class="title function_">replace</span>(<span class="keyword">new</span> <span class="title class_">Replace1</span>(<span class="string">&#x27;bar&#x27;</span>), <span class="string">&#x27;zoo&#x27;</span>)) <span class="comment">// s/foo/bar/zoo/g</span></span><br></pre></td></tr></table></figure></code></pre><h4 id="Symbol-search"><a href="#Symbol-search" class="headerlink" title="Symbol.search"></a><strong><code>Symbol.search</code></strong></h4><p>  <code>Symbol.search</code>Â æŒ‡å®šäº†ä¸€ä¸ªæœç´¢æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ¥å—ç”¨æˆ·è¾“å…¥çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿”å›è¯¥æ­£åˆ™è¡¨è¾¾å¼åœ¨å­—ç¬¦ä¸²ä¸­åŒ¹é…åˆ°çš„ä¸‹æ ‡ï¼Œè¿™ä¸ªæ–¹æ³•ç”±ä»¥ä¸‹çš„æ–¹æ³•æ¥è°ƒç”¨Â <code>String.prototype.search()</code></p><pre><code><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">caseInsensitiveSearch</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">value</span> = value.<span class="title function_">toLowerCase</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  [<span class="title class_">Symbol</span>.<span class="property">search</span>](<span class="built_in">string</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">string</span>.<span class="title function_">toLowerCase</span>().<span class="title function_">indexOf</span>(<span class="variable language_">this</span>.<span class="property">value</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;foobar&#x27;</span>.<span class="title function_">search</span>(<span class="keyword">new</span> <span class="title function_">caseInsensitiveSearch</span>(<span class="string">&#x27;BaR&#x27;</span>))) <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></code></pre><h4 id="Symbol-species"><a href="#Symbol-species" class="headerlink" title="Symbol.species"></a><strong><code>Symbol.species</code></strong></h4><p>  <code>Symbol.species</code>Â ç¬¦å·å±æ€§è¡¨ç¤ºâ€œä¸€ä¸ªå‡½æ•°å€¼ï¼Œè¯¥å‡½æ•°ä½œä¸ºåˆ›å»ºæ´¾ç”Ÿå¯¹è±¡çš„æ„é€ å‡½æ•°â€ï¼›è¿™ä¸ªå±æ€§åœ¨å†…ç½®ç±»å‹ä¸­æœ€å¸¸ç”¨ï¼Œç”¨äºå¯¹å†…ç½®ç±»å‹å®ä¾‹æ–¹æ³•çš„è¿”å›å€¼æš´éœ²å®ä¾‹åŒ–æ´¾ç”Ÿå¯¹è±¡çš„æ–¹æ³•</p><pre><code><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyArray</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Array</span> &#123;</span><br><span class="line">  <span class="comment">// è¦†ç›– species åˆ°çˆ¶çº§çš„ Array æ„é€ å‡½æ•°ä¸Š</span></span><br><span class="line">  <span class="keyword">static</span> get [<span class="title class_">Symbol</span>.<span class="property">species</span>]() &#123; <span class="keyword">return</span> <span class="title class_">Array</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="title class_">MyArray</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="keyword">var</span> mapped = a.<span class="title function_">map</span>(<span class="function"><span class="params">x</span> =&gt;</span> x * x)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mapped <span class="keyword">instanceof</span> <span class="title class_">MyArray</span>) <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mapped <span class="keyword">instanceof</span> <span class="title class_">Array</span>)   <span class="comment">// true</span></span><br></pre></td></tr></table></figure></code></pre><h4 id="Symbol-split"><a href="#Symbol-split" class="headerlink" title="Symbol.split"></a><strong><code>Symbol.split</code></strong></h4><p>  <code>Symbol.split</code>æŒ‡å‘ ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„ç´¢å¼•å¤„åˆ†å‰²å­—ç¬¦ä¸²çš„æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•é€šè¿‡Â <code>String.prototype.split()</code>è°ƒç”¨</p><p>  <code>Symbol.split</code>å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè°ƒç”¨<code>match()</code>æ–¹æ³•çš„å­—ç¬¦ä¸²å®ä¾‹</p><pre><code><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Split1</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">value</span> = value</span><br><span class="line">  &#125;</span><br><span class="line">  [<span class="title class_">Symbol</span>.<span class="property">split</span>](<span class="built_in">string</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> index = <span class="built_in">string</span>.<span class="title function_">indexOf</span>(<span class="variable language_">this</span>.<span class="property">value</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.value&#125;</span><span class="subst">$&#123;<span class="built_in">string</span>.substr(<span class="number">0</span>, index)&#125;</span>/<span class="subst">$&#123;<span class="built_in">string</span>.substr(index + <span class="variable language_">this</span>.value.length)&#125;</span>`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;foobar&#x27;</span>.<span class="title function_">split</span>(<span class="keyword">new</span> <span class="title class_">Split1</span>(<span class="string">&#x27;foo&#x27;</span>)))</span><br></pre></td></tr></table></figure></code></pre><h4 id="Symbol-toPrimitive"><a href="#Symbol-toPrimitive" class="headerlink" title="Symbol.toPrimitive"></a><strong><code>Symbol.toPrimitive</code></strong></h4><p>  <code>Symbol.toPrimitive</code>æ˜¯å†…ç½®çš„ symbol å±æ€§ï¼Œå…¶æŒ‡å®šäº†ä¸€ç§æ¥å—é¦–é€‰ç±»å‹å¹¶è¿”å›å¯¹è±¡åŸå§‹å€¼çš„è¡¨ç¤ºçš„æ–¹æ³•ã€‚å®ƒè¢«æ‰€æœ‰çš„å¼ºç±»å‹è½¬æ¢åˆ¶ç®—æ³•ä¼˜å…ˆè°ƒç”¨</p><p>  åœ¨Â <code>Symbol.toPrimitive</code>å±æ€§ï¼ˆç”¨ä½œå‡½æ•°å€¼ï¼‰çš„å¸®åŠ©ä¸‹ï¼Œå¯¹è±¡å¯ä»¥è½¬æ¢ä¸ºä¸€ä¸ªåŸå§‹å€¼ã€‚è¯¥å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼šè¢«ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°Â <code>hint</code>ï¼Œè¡¨ç¤ºè¦è½¬æ¢åˆ°çš„åŸå§‹å€¼çš„é¢„æœŸç±»å‹ã€‚<code>hint</code>å‚æ•°çš„å–å€¼æ˜¯Â <code>&quot;number&quot;</code>ã€<code>&quot;string&quot;</code>å’ŒÂ <code>&quot;default&quot;</code>ä¸­çš„ä»»æ„ä¸€ä¸ª</p><pre><code><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  [<span class="title class_">Symbol</span>.<span class="property">toPrimitive</span>](hint) &#123;</span><br><span class="line">    <span class="keyword">if</span> (hint === <span class="string">&quot;number&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (hint === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(+obj) <span class="comment">// 10  â€” hint å‚æ•°å€¼æ˜¯ &quot;number&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;obj&#125;</span>`</span>) <span class="comment">// &quot;hello&quot;   â€” hint å‚æ•°å€¼æ˜¯ &quot;string&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj + <span class="string">&#x27;&#x27;</span>) <span class="comment">// &quot;true&quot;    â€” hint å‚æ•°å€¼æ˜¯ &quot;default&quot;</span></span><br></pre></td></tr></table></figure></code></pre><h4 id="Symbol-toStringTag"><a href="#Symbol-toStringTag" class="headerlink" title="Symbol.toStringTag"></a><strong><code>Symbol.toStringTag</code></strong></h4><p>  <code>Symbol.toStringTag</code>ç”¨äºåˆ›å»ºå¯¹è±¡çš„é»˜è®¤å­—ç¬¦ä¸²æè¿°ã€‚å®ƒç”±Â <code>Object.prototype.toString()</code>æ–¹æ³•å†…éƒ¨è®¿é—®</p><pre><code><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ValidatorClass</span> &#123;</span><br><span class="line">  get [<span class="title class_">Symbol</span>.<span class="property">toStringTag</span>]() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Validator&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="keyword">new</span> <span class="title class_">ValidatorClass</span>())) <span class="comment">// &#x27;[object Validator]&#x27;</span></span><br></pre></td></tr></table></figure></code></pre><h4 id="Symbol-unscopables"><a href="#Symbol-unscopables" class="headerlink" title="Symbol.unscopables"></a><strong><code>Symbol.unscopables</code></strong></h4><p>  <code>Symbol.unscopables</code>æŒ‡ç”¨äºæŒ‡å®šå¯¹è±¡å€¼ï¼Œå…¶å¯¹è±¡è‡ªèº«å’Œç»§æ‰¿çš„ä»å…³è”å¯¹è±¡çš„ with ç¯å¢ƒç»‘å®šä¸­æ’é™¤çš„å±æ€§åç§°</p><pre><code><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> object1 = &#123;</span><br><span class="line">  <span class="attr">property1</span>: <span class="number">42</span>,</span><br><span class="line">  <span class="attr">property2</span>: <span class="number">42</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">object1[<span class="title class_">Symbol</span>.<span class="property">unscopables</span>] = &#123;</span><br><span class="line">  <span class="attr">property2</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> (object1) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(property1) <span class="comment">// 42</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(property2) <span class="comment">// Expected output: Error: property1 is not defined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Symbol</title>
      <link href="/blog//Symbol/"/>
      <url>/blog//Symbol/</url>
      
        <content type="html"><![CDATA[<h2 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a><center>Symbol</center></h2><h4 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h4><p>  ES6å¼•å…¥äº†ä¸€ç§æ–°çš„åŸå§‹æ•°æ®ç±»å‹<code>symbol</code>ï¼Œè¡¨ç¤ºç‹¬ä¸€æ— äºŒçš„å€¼ã€‚å®ƒå±äºJavaScriptè¯­è¨€çš„æ•°æ®ç±»å‹ä¹‹ä¸€</p><p>  å…«å¤§æ•°æ®ç±»å‹ï¼š<code>Symbolã€undefinedã€nullã€Booleanã€Stringã€Numberã€Bigintã€Object</code></p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨æ„ä¸è¦ä½¿ç”¨newå‘½ä»¤ï¼Œç”±äºSymbolå€¼ä¸æ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥ä¸èƒ½æ·»åŠ å±æ€§</span></span><br><span class="line"><span class="keyword">let</span> s = <span class="title class_">Symbol</span>(<span class="string">&#x27;feature&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> s <span class="comment">// &quot;symbol&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Symbolå€¼ä¸èƒ½ä¸å…¶ä»–ç±»å‹çš„å€¼è¿›è¡Œé¢„ç®—ï¼Œä¼šæŠ¥é”™</span></span><br><span class="line"></span><br><span class="line"><span class="string">`your symbol is <span class="subst">$&#123;s&#125;</span>`</span> <span class="comment">// TypeError: can&#x27;t convert symbol to string</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½†æ˜¯Symbolå€¼å¯ä»¥æ˜¾ç¤ºè½¬ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="title class_">String</span>(s) <span class="comment">// &#x27;Symbol(feature)&#x27;</span></span><br><span class="line">s.<span class="title function_">toString</span>() <span class="comment">// &#x27;Symbol(feature)&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿˜å¯ä»¥è½¬ä¸ºå¸ƒå°”å€¼</span></span><br><span class="line"><span class="title class_">Boolean</span>(s) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h4 id="2-ä½œä¸ºå±æ€§åçš„Symbol"><a href="#2-ä½œä¸ºå±æ€§åçš„Symbol" class="headerlink" title="2. ä½œä¸ºå±æ€§åçš„Symbol"></a>2. ä½œä¸ºå±æ€§åçš„<code>Symbol</code></h4>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> symbol = <span class="title class_">Symbol</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€ç§å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line">obj[symbol] = <span class="string">&#x27;hello!&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬äºŒç§å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  [symbol]: <span class="string">&#x27;hello!&#x27;</span>  <span class="comment">// æ–¹æ‹¬å·ä¸ºES6è®¡ç®—å±æ€§ï¼ˆcomputedPropertyNameï¼‰</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸‰ç§å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> a = &#123;&#125;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(a, symbol, &#123;&#125;)</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperties</span>()</span><br></pre></td></tr></table></figure><p>  æ³¨æ„ï¼š<code>Symbol</code> å€¼ä½œä¸ºå¯¹è±¡å±æ€§åæ—¶ï¼Œä¸èƒ½ç”¨ç‚¹è¿ç®—ç¬¦ï¼ˆES6çš„åŠ¨æ€å±æ€§åªåœ¨æ–¹æ‹¬å·ä¸­ç”Ÿæ•ˆï¼Œè€Œç‚¹<code>.</code>è¿ç®—ç¬¦åé¢æ€»æ˜¯å­—ç¬¦ä¸²ï¼‰</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sy = <span class="title class_">Symbol</span>(<span class="string">&#x27;feature&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    [sy]: <span class="string">&#x27;feature&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">sy</span>) <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj[sy]) <span class="comment">// &#x27;feature&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="3-éå†å±æ€§å"><a href="#3-éå†å±æ€§å" class="headerlink" title="3. éå†å±æ€§å"></a>3. éå†å±æ€§å</h4><p>  <code>Symbol</code> ä½œä¸ºå±æ€§åï¼Œéå†å¯¹è±¡çš„æ—¶å€™ï¼Œè¯¥å±æ€§ä¸ä¼šå‡ºç°åœ¨<code>for...in</code>ã€<code>for...of</code>å¾ªç¯ä¸­ï¼Œä¹Ÿä¸ä¼šè¢«<code>Object.keys()</code>ã€<code>Object.getOwnPropertyNames()</code>ã€<code>JSON.stringify()</code>è¿”å›</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">getOwnPropertySymbols</span>()</span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">ownKeys</span>() <span class="comment">//Reflect.ownKeys()æ–¹æ³•å¯ä»¥è¿”å›æ‰€æœ‰ç±»å‹çš„é”®åï¼ŒåŒ…æ‹¬å¸¸è§„é”®åå’Œ Symbol é”®å</span></span><br></pre></td></tr></table></figure><h4 id="4-API"><a href="#4-API" class="headerlink" title="4. API"></a>4. API</h4><ul><li><p><code>Symbol.prototype.description</code></p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–Symbolå¯¹è±¡çš„æè¿°</span></span><br><span class="line"><span class="keyword">let</span> s = <span class="title class_">Symbol</span>(<span class="string">&#x27;feature&#x27;</span>)</span><br><span class="line">s.<span class="property">descriotion</span> <span class="comment">// &quot;feature&quot;</span></span><br></pre></td></tr></table></figure></li><li><p><code>Symbol.for()</code>ï¼šæ³¨æ„ä¼šè¢«ç™»è®°åˆ°å…¨å±€ç¯å¢ƒï¼Œå¯ä»¥åœ¨ä¸åŒçš„ <code>iframe</code> æˆ– <code>service worker</code> ä¸­å–åˆ°åŒä¸€ä¸ªå€¼</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Symbol</span>.<span class="title function_">for</span>(<span class="string">&quot;bar&quot;</span>) === <span class="title class_">Symbol</span>.<span class="title function_">for</span>(<span class="string">&quot;bar&quot;</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Symbol</span>(<span class="string">&quot;bar&quot;</span>) === <span class="title class_">Symbol</span>(<span class="string">&quot;bar&quot;</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p> æ³¨æ„ï¼š</p><ul><li><code>Symbol.for()</code>ä¸<code>Symbol()</code>è¿™ä¸¤ç§å†™æ³•ï¼Œéƒ½ä¼šç”Ÿæˆæ–°çš„<code>Symbol</code></li><li><code>Symbol.for()</code>ä¼šè¢«ç™»è®°åˆ°å…¨å±€ç¯å¢ƒï¼Œ<code>Symbol()</code>ä¸ä¼š</li><li><code>Symbol.for()</code>ä¼šå…ˆæ£€æŸ¥ç»™å®šçš„<code>key</code>æ˜¯å¦å·²ç»å­˜åœ¨,å¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„<code>Symbol</code>ï¼Œå­˜åœ¨å°±è¿”å›è¿™ä¸ª<code>Symbol</code>å€¼</li></ul></li><li><p><code>Symbol.keyFor()</code>ï¼šè¿”å›è¢«<code>Symbol.for()</code>æ³¨å†Œåˆ°å…¨å±€<code>Symbol</code>ç±»å‹å€¼çš„<code>key</code></p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s1 = <span class="title class_">Symbol</span>.<span class="title function_">for</span>(<span class="string">&quot;feature&quot;</span>);</span><br><span class="line"><span class="title class_">Symbol</span>.<span class="title function_">keyFor</span>(s1) <span class="comment">// &quot;feature&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> s2 = <span class="title class_">Symbol</span>(<span class="string">&quot;feature&quot;</span>);</span><br><span class="line"><span class="title class_">Symbol</span>.<span class="title function_">keyFor</span>(s2)  <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="5-å¸¸ç”¨å®ä¾‹"><a href="#5-å¸¸ç”¨å®ä¾‹" class="headerlink" title="5. å¸¸ç”¨å®ä¾‹"></a>5. å¸¸ç”¨å®ä¾‹</h4><ul><li><p>æ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²ï¼šé­”æœ¯å­—ç¬¦ä¸²æŒ‡çš„æ˜¯ï¼Œåœ¨ä»£ç ä¹‹ä¸­å¤šæ¬¡å‡ºç°ã€ä¸ä»£ç å½¢æˆå¼ºè€¦åˆçš„æŸä¸€ä¸ªå…·ä½“çš„å­—ç¬¦ä¸²æˆ–è€…æ•°å€¼ã€‚é£æ ¼è‰¯å¥½çš„ä»£ç ï¼Œåº”è¯¥å°½é‡æ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²ï¼Œæ”¹ç”±å«ä¹‰æ¸…æ™°çš„å˜é‡ä»£æ›¿</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">shape</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (shape) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;circle&#x27;</span>: <span class="comment">// é­”æœ¯å­—ç¬¦ä¸²</span></span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¸è§è§£å†³æ–¹æ³•ï¼šä½¿ç”¨å˜é‡</span></span><br><span class="line"><span class="keyword">const</span> shapeType = &#123;</span><br><span class="line">  <span class="attr">circle</span>: <span class="string">&#x27;circle&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">shape</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (shape) &#123;</span><br><span class="line">    <span class="keyword">case</span> shapeType.<span class="property">circle</span>: <span class="comment">// ä½¿ç”¨å˜é‡</span></span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨Symbolï¼Œå®šä¹‰çš„å˜é‡çš„å±æ€§å€¼å¹¶ä¸é‡è¦ï¼Œåªæ˜¯ä¸ºäº†åŒºåˆ†</span></span><br><span class="line"><span class="keyword">const</span> shapeType = &#123;</span><br><span class="line">  <span class="attr">circle</span>: <span class="title class_">Symbol</span>() <span class="comment">// ä½¿ç”¨Symbol</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ESModuleä¸CommonJSæ¨¡å—åŒ–è§„èŒƒ</title>
      <link href="/blog//ESModule%E4%B8%8ECommonJS%E6%A8%A1%E5%9D%97%E5%8C%96%E8%A7%84%E8%8C%83/"/>
      <url>/blog//ESModule%E4%B8%8ECommonJS%E6%A8%A1%E5%9D%97%E5%8C%96%E8%A7%84%E8%8C%83/</url>
      
        <content type="html"><![CDATA[<h2 id="ESModuleä¸CommonJSæ¨¡å—åŒ–è§„èŒƒ"><a href="#ESModuleä¸CommonJSæ¨¡å—åŒ–è§„èŒƒ" class="headerlink" title="ESModuleä¸CommonJSæ¨¡å—åŒ–è§„èŒƒ"></a><center>ESModuleä¸CommonJSæ¨¡å—åŒ–è§„èŒƒ</center></h2><p>JavaScript çš„æ¨¡å—åŒ–ä¸€ç›´æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ£˜æ‰‹çš„é—®é¢˜ã€‚åœ¨ ES6 ä¹‹å‰ï¼ŒJavaScript æ²¡æœ‰å†…ç½®çš„æ¨¡å—åŒ–æœºåˆ¶ï¼Œè¿™å¯¼è‡´äº†å¼€å‘è€…éœ€è¦ä½¿ç”¨ä¸€äº›å…¶ä»–çš„æ–¹å¼æ¥ç®¡ç†ä»£ç çš„ä¾èµ–å…³ç³»ï¼Œä¾‹å¦‚ä½¿ç”¨ IIFEï¼ˆç«‹å³æ‰§è¡Œå‡½æ•°ï¼‰ç­‰æ–¹å¼æ¥å®ç°æ¨¡å—åŒ–ç¼–ç¨‹ã€‚è¿™äº›æ–¹å¼è™½ç„¶å¯ä»¥å®ç°ä»£ç çš„æ¨¡å—åŒ–ï¼Œä½†æ˜¯ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§å¹¶ä¸æ˜¯å¾ˆå¥½ã€‚</p><p>åœ¨ ES6 ä¸­ï¼ŒJavaScript å¼•å…¥äº†æ¨¡å—åŒ–è§„èŒƒï¼Œè¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ›´åŠ æ–¹ä¾¿åœ°ç®¡ç†ä»£ç çš„ä¾èµ–å…³ç³»ï¼Œæé«˜ä»£ç çš„å¯é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ES6 å¼•å…¥äº†ä¸€ç§æ–°çš„æ¨¡å—åŒ–è§„èŒƒï¼Œå³ ESModuleï¼ˆES6 Moduleï¼‰ï¼Œä¸ä¹‹å‰çš„ CommonJS æ¨¡å—åŒ–è§„èŒƒæœ‰ä¸€äº›åŒºåˆ«ã€‚</p><h3 id="ESModule-æ¨¡å—åŒ–è§„èŒƒ"><a href="#ESModule-æ¨¡å—åŒ–è§„èŒƒ" class="headerlink" title="ESModule æ¨¡å—åŒ–è§„èŒƒ"></a>ESModule æ¨¡å—åŒ–è§„èŒƒ</h3><p>ESModule æ˜¯ ES6 ä¸­å¼•å…¥çš„ä¸€ç§æ¨¡å—åŒ–è§„èŒƒï¼Œå®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯å®ç°ä¸€ä¸ªå…ˆè¿›çš„ã€å¯é çš„ã€å¯é™æ€åˆ†æçš„æ¨¡å—åŒ–ç³»ç»Ÿï¼Œä»¥é€‚åº” JavaScript åœ¨å¤§å‹é¡¹ç›®ä¸­çš„å¤æ‚æ€§ã€‚</p><h4 id="å¯¼å…¥å’Œå¯¼å‡º"><a href="#å¯¼å…¥å’Œå¯¼å‡º" class="headerlink" title="å¯¼å…¥å’Œå¯¼å‡º"></a>å¯¼å…¥å’Œå¯¼å‡º</h4><p>ESModule ä¸­ä½¿ç”¨ <code>import</code> å’Œ <code>export</code> å…³é”®å­—æ¥è¿›è¡Œå¯¼å…¥å’Œå¯¼å‡ºã€‚å¯¼å…¥å’Œå¯¼å‡ºçš„è¯­æ³•éå¸¸ç®€æ´æ˜äº†ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥</span></span><br><span class="line"><span class="keyword">import</span> &#123; add &#125; <span class="keyword">from</span> <span class="string">&#x27;./math.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å‡º</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ ESModule ä¸­ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶ä¸­å¯ä»¥æœ‰å¤šä¸ªå¯¼å…¥å’Œå¯¼å‡ºã€‚ä½¿ç”¨ ESModule è¿›è¡Œæ¨¡å—åŒ–ç¼–ç¨‹å¯ä»¥ä½¿å¾—ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§å¤§å¤§æé«˜ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æé«˜ä»£ç çš„é‡ç”¨æ€§ã€‚</p><h4 id="é™æ€åˆ†æ"><a href="#é™æ€åˆ†æ" class="headerlink" title="é™æ€åˆ†æ"></a>é™æ€åˆ†æ</h4><p>ESModule ä¸­çš„å¯¼å…¥å’Œå¯¼å‡ºæ˜¯é™æ€åˆ†æçš„ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥åœ¨ç¼–è¯‘æ—¶åˆ†æä¾èµ–å…³ç³»ï¼Œä»è€Œè¿›è¡Œä¸€äº›ä¼˜åŒ–ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†å¯¼å…¥çš„æ¨¡å—è½¬æ¢ä¸ºå¸¸é‡ï¼Œä»è€Œæé«˜ä»£ç çš„æ‰§è¡Œæ•ˆç‡ã€‚</p><h4 id="é¡¶çº§ä½œç”¨åŸŸ"><a href="#é¡¶çº§ä½œç”¨åŸŸ" class="headerlink" title="é¡¶çº§ä½œç”¨åŸŸ"></a>é¡¶çº§ä½œç”¨åŸŸ</h4><p>ESModule ä¸­çš„æ¯ä¸ªæ¨¡å—éƒ½å…·æœ‰è‡ªå·±çš„é¡¶çº§ä½œç”¨åŸŸï¼Œè¿™æ„å‘³ç€æ¯ä¸ªæ¨¡å—ä¸­çš„å˜é‡å’Œå‡½æ•°éƒ½ä¸ä¼šæ±¡æŸ“å…¨å±€å‘½åç©ºé—´ã€‚è¿™å¯ä»¥ä½¿å¾—ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§å¤§å¤§æé«˜ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é¿å…å‘½åå†²çªç­‰é—®é¢˜ã€‚</p><h3 id="CommonJS-æ¨¡å—åŒ–è§„èŒƒ"><a href="#CommonJS-æ¨¡å—åŒ–è§„èŒƒ" class="headerlink" title="CommonJS æ¨¡å—åŒ–è§„èŒƒ"></a>CommonJS æ¨¡å—åŒ–è§„èŒƒ</h3><p>CommonJS æ˜¯ä¸€ç§æ¯”è¾ƒæˆç†Ÿçš„ JavaScript æ¨¡å—åŒ–è§„èŒƒï¼Œå®ƒæœ€åˆæ˜¯ä¸º Node.js è®¾è®¡çš„ï¼Œä½†æ˜¯ç°åœ¨ä¹Ÿå¯ä»¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ã€‚CommonJS ä¸­ä½¿ç”¨ <code>require</code> å’Œ <code>module.exports</code> å…³é”®å­—æ¥è¿›è¡Œå¯¼å…¥å’Œå¯¼å‡ºã€‚ä¸ ESModule ä¸åŒçš„æ˜¯ï¼ŒCommonJS ä¸­çš„å¯¼å…¥å’Œå¯¼å‡ºæ˜¯åŠ¨æ€çš„ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯åœ¨è¿è¡Œæ—¶è§£æçš„ï¼Œè€Œä¸æ˜¯åœ¨ç¼–è¯‘æ—¶è§£æçš„ã€‚</p><h4 id="å¯¼å…¥å’Œå¯¼å‡º-1"><a href="#å¯¼å…¥å’Œå¯¼å‡º-1" class="headerlink" title="å¯¼å…¥å’Œå¯¼å‡º"></a>å¯¼å…¥å’Œå¯¼å‡º</h4><p>CommonJS ä¸­ä½¿ç”¨ <code>require</code> å‡½æ•°æ¥å¯¼å…¥æ¨¡å—ï¼Œä½¿ç”¨ <code>module.exports</code> å¯¹è±¡æ¥å¯¼å‡ºæ¨¡å—ã€‚å¯¼å…¥å’Œå¯¼å‡ºçš„è¯­æ³•ç›¸å¯¹ ESModule æ¥è¯´è¾ƒä¸ºç¹çï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥</span></span><br><span class="line"><span class="keyword">const</span> &#123; add &#125; = <span class="built_in">require</span>(<span class="string">&#x27;./math.js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å‡º</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  add</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ CommonJS ä¸­ï¼Œæ¯ä¸ªæ¨¡å—ä¹Ÿæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶ä¸­å¯ä»¥æœ‰å¤šä¸ªå¯¼å…¥å’Œå¯¼å‡ºã€‚ä¸ ESModule ä¸åŒçš„æ˜¯ï¼ŒCommonJS ä¸­çš„å¯¼å…¥å’Œå¯¼å‡ºæ˜¯åŠ¨æ€çš„ï¼Œè¿™æ„å‘³ç€åœ¨è¿è¡Œæ—¶éœ€è¦å¯¹æ¯ä¸ªæ¨¡å—è¿›è¡Œè§£æï¼Œè¿™ä¼šå¯¼è‡´ä¸€äº›æ€§èƒ½é—®é¢˜ã€‚</p><h4 id="åŠ¨æ€ç‰¹æ€§"><a href="#åŠ¨æ€ç‰¹æ€§" class="headerlink" title="åŠ¨æ€ç‰¹æ€§"></a>åŠ¨æ€ç‰¹æ€§</h4><p>ç”±äº CommonJS ä¸­çš„å¯¼å…¥å’Œå¯¼å‡ºæ˜¯åŠ¨æ€çš„ï¼Œæ‰€ä»¥å®ƒå…·æœ‰ä¸€äº›åŠ¨æ€ç‰¹æ€§ï¼Œä¾‹å¦‚å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åŠ è½½æ¨¡å—ã€‚è¿™äº›ç‰¹æ€§åœ¨æŸäº›åœºæ™¯ä¸‹æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œä½†æ˜¯åœ¨ä¸€äº›å…¶ä»–åœºæ™¯ä¸‹ä¹Ÿå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œä¾‹å¦‚å› ä¸ºåŠ¨æ€ç‰¹æ€§å¯¼è‡´ä»£ç æ— æ³•è¿›è¡Œé™æ€åˆ†æï¼Œä»è€Œæ— æ³•è¿›è¡Œä¼˜åŒ–ã€‚</p><h3 id="ESModule-ä¸-CommonJS-çš„åŒºåˆ«"><a href="#ESModule-ä¸-CommonJS-çš„åŒºåˆ«" class="headerlink" title="ESModule ä¸ CommonJS çš„åŒºåˆ«"></a>ESModule ä¸ CommonJS çš„åŒºåˆ«</h3><p>è™½ç„¶ ESModule å’Œ CommonJS éƒ½æ˜¯ JavaScript çš„æ¨¡å—åŒ–è§„èŒƒï¼Œä½†æ˜¯å®ƒä»¬ä¹‹é—´å­˜åœ¨ä¸€äº›åŒºåˆ«ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><h4 id="å¯¼å…¥å’Œå¯¼å‡ºçš„è¯­æ³•"><a href="#å¯¼å…¥å’Œå¯¼å‡ºçš„è¯­æ³•" class="headerlink" title="å¯¼å…¥å’Œå¯¼å‡ºçš„è¯­æ³•"></a>å¯¼å…¥å’Œå¯¼å‡ºçš„è¯­æ³•</h4><p>ESModule ä½¿ç”¨ <code>import</code> å’Œ <code>export</code> å…³é”®å­—æ¥è¿›è¡Œå¯¼å…¥å’Œå¯¼å‡ºï¼Œè€Œ CommonJS ä½¿ç”¨ <code>require</code> å’Œ <code>module.exports</code> å…³é”®å­—æ¥è¿›è¡Œå¯¼å…¥å’Œå¯¼å‡ºã€‚ESModule çš„è¯­æ³•ç›¸å¯¹ç®€æ´æ˜äº†ï¼Œè€Œ CommonJS çš„è¯­æ³•ç›¸å¯¹è¾ƒä¸ºç¹çã€‚</p><h4 id="é™æ€åˆ†æ-1"><a href="#é™æ€åˆ†æ-1" class="headerlink" title="é™æ€åˆ†æ"></a>é™æ€åˆ†æ</h4><p>ESModule ä¸­çš„å¯¼å…¥å’Œå¯¼å‡ºæ˜¯é™æ€åˆ†æçš„ï¼Œå¯ä»¥åœ¨ç¼–è¯‘æ—¶åˆ†æä¾èµ–å…³ç³»ï¼Œå¹¶è¿›è¡Œä¸€äº›ä¼˜åŒ–ã€‚è€Œ CommonJS ä¸­çš„å¯¼å…¥å’Œå¯¼å‡ºæ˜¯åŠ¨æ€çš„ï¼Œéœ€è¦åœ¨è¿è¡Œæ—¶è¿›è¡Œè§£æã€‚è¿™å¯¼è‡´ ESModule å…·æœ‰æ›´å¥½çš„æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚</p><h4 id="é¡¶çº§ä½œç”¨åŸŸ-1"><a href="#é¡¶çº§ä½œç”¨åŸŸ-1" class="headerlink" title="é¡¶çº§ä½œç”¨åŸŸ"></a>é¡¶çº§ä½œç”¨åŸŸ</h4><p>ESModule ä¸­çš„æ¯ä¸ªæ¨¡å—éƒ½å…·æœ‰è‡ªå·±çš„é¡¶çº§ä½œç”¨åŸŸï¼Œè€Œ CommonJS ä¸­çš„æ¨¡å—å…±äº«å…¨å±€ä½œç”¨åŸŸã€‚è¿™æ„å‘³ç€ ESModule ä¸­çš„å˜é‡å’Œå‡½æ•°ä¸ä¼šæ±¡æŸ“å…¨å±€å‘½åç©ºé—´ï¼Œè€Œ CommonJS ä¸­å¯èƒ½ä¼šå­˜åœ¨å‘½åå†²çªç­‰é—®é¢˜ã€‚</p><h4 id="å¾ªç¯ä¾èµ–"><a href="#å¾ªç¯ä¾èµ–" class="headerlink" title="å¾ªç¯ä¾èµ–"></a>å¾ªç¯ä¾èµ–</h4><p>ESModule ä¸­ä¸å…è®¸å¾ªç¯ä¾èµ–ï¼Œå¦‚æœå‡ºç°å¾ªç¯ä¾èµ–ä¼šæŠ¥é”™ã€‚è€Œ CommonJS ä¸­å¯ä»¥å¤„ç†å¾ªç¯ä¾èµ–ï¼Œä½†æ˜¯ä¼šå­˜åœ¨ä¸€äº›é—®é¢˜ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ESModule å’ŒCommonJS éƒ½æ˜¯ JavaScript çš„æ¨¡å—åŒ–è§„èŒƒï¼Œå®ƒä»¬éƒ½å…·æœ‰å„è‡ªçš„ä¼˜ç¼ºç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚ESModule å…·æœ‰æ›´å¥½çš„æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ï¼Œé€‚ç”¨äºéœ€è¦å¤§è§„æ¨¡ç®¡ç†çš„é¡¹ç›®å’Œéœ€è¦è¿›è¡Œé™æ€åˆ†æçš„åœºæ™¯ï¼›è€Œ CommonJS å…·æœ‰åŠ¨æ€ç‰¹æ€§ï¼Œé€‚ç”¨äºéœ€è¦åŠ¨æ€åŠ è½½æ¨¡å—çš„åœºæ™¯ã€‚</p><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å…·ä½“çš„æƒ…å†µé€‰æ‹©ä¸åŒçš„æ¨¡å—åŒ–æ–¹æ¡ˆã€‚å¦‚æœæˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ä¸ª Node.js é¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨ CommonJS è§„èŒƒæ¥è¿›è¡Œæ¨¡å—åŒ–ï¼›å¦‚æœæˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ä¸ªå¤§è§„æ¨¡çš„ Web åº”ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ ESModule è§„èŒƒæ¥è¿›è¡Œæ¨¡å—åŒ–ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œæ¨¡å—åŒ–æ˜¯ç°ä»£åŒ– JavaScript å¼€å‘çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒå¯ä»¥æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€å¯é‡ç”¨æ€§å’Œå¯æ‰©å±•æ€§ï¼Œä½¿å¾— JavaScript åº”ç”¨ç¨‹åºæ›´åŠ æ˜“äºå¼€å‘å’Œç»´æŠ¤ã€‚æ— è®ºæ˜¯ ESModule è¿˜æ˜¯ CommonJSï¼Œå®ƒä»¬éƒ½æ˜¯éå¸¸é‡è¦çš„ JavaScript æ¨¡å—åŒ–è§„èŒƒï¼Œå€¼å¾—æˆ‘ä»¬æ·±å…¥äº†è§£å’Œå­¦ä¹ ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
          <category> Typescript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Typescript </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
