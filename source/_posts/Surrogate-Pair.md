---
title: Surrogate Pair
date: 2022-06-28 14:40:01
update: 2022-6-28 15:47:34
tags:
  - Typescript
  - JavaScript
  - Unicode
categories:
  - JavaScript
description: 'JavaScriptä¸­çš„Surrogate Pair'
keywords: 'Typescript,JavaScript,Surrogate Pair'
top_img: /assert/index-image.png
cover: false
---

## <center>Surrogate Pair</center>
  ä»€ä¹ˆæ˜¯`Surrogate Pair`å‘¢ï¼Ÿåœ¨æˆ‘äº†è§£åˆ°å®ƒçš„æ—¶å€™ï¼Œæˆ‘åªæ˜¯åœ¨Googleæœç´¢"`å¦‚ä½•åœ¨JavaScriptä¸­è·å–å­—ç¬¦ä¸²çš„æœ€åä¸€ä½`"ï¼Œäºæ˜¯æˆ‘å¾—åˆ°äº†ä¸‹é¢å‡ ç§æ–¹å¼ï¼Œå…ˆè®©æˆ‘ä»¬çœ‹çœ‹è¿™å‡ ç§æ–¹å¼
#### è·å–å­—ç¬¦ä¸²çš„æœ€åä¸€ä½çš„å‡ ç§æ–¹å¼
  - substringã€substr
    ```JavaScript
      str.substr(str.length - 1)
      str.substring(str.length - 1)
    ```

  - charAt
    ```JavaScript
      str.charAt(str.length - 1)
    ```

  - split
    ```JavaScript
      str.split('')[str.length - 1]
    ```

  - æ­£åˆ™è¡¨è¾¾å¼
    ```JavaScript
      str.match(/.$/).pop()
    ```

  - Array.from()
    ```JavaScript
      Array.from(str).pop()
    ```

  - Spread
    ```JavaScript
      [...str].pop()
    ```

#### å‡ ç§æ–¹å¼å¤„ç†å­—ç¬¦ä¸²
  ä»¥ä¸Šå‡ ç§æ–¹å¼å¤„ç†å­—ç¬¦ä¸²æ­£å¸¸æƒ…å†µä¸‹ï¼ˆå¦‚è‹±æ–‡å­—ç¬¦ä¸²ï¼‰éƒ½æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹æ‰§è¡Œç»“æœ
  ```JavaScript
    let str = 'example'
    str.substr(str.length - 1) // 'e'
    str.substring(str.length - 1) // 'e'
    str.charAt(str.length - 1) // 'e'
    str.split('')[str.length - 1] // 'e'
    str.match(/.$/).pop() // 'e'
    Array.from(str).pop() // 'e'
    [...str].pop() // 'e'
  ```
  æ‰€æœ‰æ–¹å¼éƒ½èƒ½æ­£ç¡®è·å–å­—ç¬¦ä¸²çš„æœ€åä¸€ä½ï¼Œä½†å½“æˆ‘ä»¬æˆ‘ä»¬å­—ç¬¦ä¸²ä¸­å‡ºç°`Surrogate Pair`æ—¶ï¼ˆæ¯”å¦‚emojiï¼‰ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆ
  ```JavaScript
    let str = 'exampleğŸ’©'
    str.substr(str.length - 1) // '\uDCA9'
    str.substring(str.length - 1) // '\uDCA9'
    str.charAt(str.length - 1) // '\uDCA9'
    str.split('')[str.length - 1] // '\uDCA9'
    str.match(/.$/).pop() // '\uDCA9'
    Array.from(str).pop() // 'ğŸ’©'
    [...str].pop() // 'ğŸ’©'
  ```
  è¿™ä¸ªç»“æœè®©æ˜¯å¦è®©ä½ æ„Ÿåˆ°è´¹è§£ï¼Ÿæ¥ä¸‹æ¥è®©æˆ‘ä»¬äº†è§£ä¸€ä¸‹åŸå› å§

#### Surrogate Pair
  - ä»€ä¹ˆæ˜¯Surrogate Pair
  
    åœ¨Unicodeå­—ç¬¦é›†ä¸­ï¼Œæœ‰ä¸€äº›å­—ç¬¦çš„ç ç‚¹éœ€è¦è¶…è¿‡16ä½æ‰èƒ½è¡¨ç¤ºã€‚å› æ­¤ï¼ŒUnicodeå®šä¹‰äº†ä¸€ç§æœºåˆ¶ï¼Œç”¨äºå°†è¿™äº›å­—ç¬¦åˆ†æˆä¸¤ä¸ª16ä½ç¼–ç å•å…ƒã€‚è¿™äº›ç¼–ç å•å…ƒè¢«ç§°ä¸ºä»£ç†é¡¹ï¼ˆSurrogateï¼‰ã€‚ä¸€ä¸ªä»£ç†é¡¹ç”±ä¸¤ä¸ªç¼–ç å•å…ƒç»„æˆï¼šé«˜ä»£ç†é¡¹å’Œä½ä»£ç†é¡¹ã€‚é«˜ä»£ç†é¡¹çš„ç¼–ç å•å…ƒåœ¨èŒƒå›´0xD800åˆ°0xDBFFä¹‹é—´ï¼Œè€Œä½ä»£ç†é¡¹çš„ç¼–ç å•å…ƒåœ¨èŒƒå›´0xDC00åˆ°0xDFFFä¹‹é—´

    ä¾‹å¦‚ï¼Œè¡¨æƒ…ç¬¦å·ğŸ˜€ï¼ˆU+1F600ï¼‰æ˜¯ç”±ä¸¤ä¸ªç¼–ç å•å…ƒç»„æˆçš„ä»£ç†å¯¹è¡¨ç¤ºçš„ã€‚é«˜ä»£ç†é¡¹ä¸º0xD83Dï¼Œä½ä»£ç†é¡¹ä¸º0xDE00ã€‚è¿™ä¸¤ä¸ªç¼–ç å•å…ƒç»„æˆçš„ä»£ç†å¯¹è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªå•ä¸ªçš„Unicodeå­—ç¬¦

  - JavaScriptä¸­çš„Surrogate Pair

    JavaScriptä½¿ç”¨UTF-16ç¼–ç ï¼Œå½“JavaScripté‡åˆ°ä»£ç†å¯¹æ—¶ï¼Œå®ƒå°†å…¶è§£é‡Šä¸ºä¸¤ä¸ªå•ç‹¬çš„å­—ç¬¦ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œè¿™æ„å‘³ç€ï¼Œå¦‚æœæ‚¨æ­£åœ¨å¤„ç†åŒ…å«ä»£ç†å¯¹çš„å­—ç¬¦ä¸²ï¼Œæ‚¨éœ€è¦è€ƒè™‘åˆ°è¿™äº›ç‰¹æ®Šå­—ç¬¦ï¼Œä»¥ç¡®ä¿æ­£ç¡®å¤„ç†å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦

    åœ¨å¤„ç†åŒ…å«ä»£ç†å¯¹çš„å­—ç¬¦ä¸²æ—¶ï¼Œéœ€è¦æ³¨æ„å­—ç¬¦ä¸²çš„é•¿åº¦å’Œç´¢å¼•ã€‚ç”±äºä»£ç†å¯¹æ˜¯ç”±ä¸¤ä¸ª16ä½ç¼–ç å•å…ƒç»„æˆçš„ï¼Œæ‰€ä»¥å½“ä»£ç†å¯¹å‡ºç°åœ¨å­—ç¬¦ä¸²ä¸­æ—¶ï¼Œè¯¥å­—ç¬¦ä¸²çš„é•¿åº¦å°†å¢åŠ 2è€Œä¸æ˜¯1
    ```JavaScript
      'ğŸ’©'.length // 2
    ```
    æ­¤å¤–ï¼Œåœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ç´¢å¼•è®¿é—®ä»£ç†å¯¹æ—¶éœ€è¦æ³¨æ„ã€‚å› ä¸ºä»£ç†å¯¹çš„ç¬¬ä¸€ä¸ªç¼–ç å•å…ƒåœ¨å­—ç¬¦ä¸²ä¸­çš„ç´¢å¼•ä½ç½®å¿…é¡»æ˜¯å¶æ•°ï¼Œè€Œç¬¬äºŒä¸ªç¼–ç å•å…ƒåœ¨å­—ç¬¦ä¸²ä¸­çš„ç´¢å¼•ä½ç½®å¿…é¡»æ˜¯å¥‡æ•°

    å› æ­¤ï¼Œåœ¨ä½¿ç”¨ä»¥ä¸Šå‡ ç§æ–¹å¼å¤„ç†`Surrogate Pair`æ—¶ï¼Œä¸€äº›æ–¹æ³•ä¸èƒ½æ­£ç¡®è¿›è¡Œå¤„ç†

#### å¦‚ä½•æ­£ç¡®å¤„ç†`Surrogate Pair`ï¼Ÿ
  åœ¨ä¸Šé¢çš„å‡ ç§æ–¹å¼ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿçœ‹åˆ°äº†å¦‚ä½•æ­£ç¡®å¤„ç†`Surrogate Pair`
  
  - Array.from()
  
    ä½¿ç”¨Array.from()èƒ½æ­£ç¡®çš„å°†æ‰€æœ‰å­—ç¬¦ä¸²æŒ‰ç…§ä½ æƒ³è¦çš„æ–¹å¼å¤„ç†
    ```JavaScript
      let str = 'ğŸ˜€helloğŸ’©'
      Array.from(str) // ['ğŸ˜€', 'h', 'e', 'l', 'l', 'o', 'ğŸ’©']
    ```

  - Spread
    åŒæ ·ä½¿ç”¨Spread(æ‰©å±•è¿ç®—ç¬¦)ä¹Ÿèƒ½è¿›è¡Œå¤„ç†
     ```JavaScript
      let str = 'ğŸ˜€helloğŸ’©'
      [...str] // ['ğŸ˜€', 'h', 'e', 'l', 'l', 'o', 'ğŸ’©']
    ```

#### æ€»ç»“
  `Surrogate Pair`æ˜¯Unicodeå­—ç¬¦é›†ä¸­çš„ä¸€äº›å­—ç¬¦ï¼Œç”±äºå…¶ç ç‚¹è¶…è¿‡äº†16ä½ï¼Œå› æ­¤è¢«æ‹†åˆ†ä¸ºä¸¤ä¸ª16ä½ç¼–ç å•å…ƒã€‚åœ¨JavaScriptä¸­ï¼Œç”±äºå­—ç¬¦ä¸²æ˜¯UTF-16ç¼–ç ï¼Œå› æ­¤ä»£ç†å¯¹è¢«è§£é‡Šä¸ºä¸¤ä¸ªå•ç‹¬çš„å­—ç¬¦ã€‚åœ¨å¤„ç†åŒ…å«ä»£ç†å¯¹çš„å­—ç¬¦ä¸²æ—¶ï¼Œéœ€è¦æ³¨æ„å­—ç¬¦ä¸²çš„é•¿åº¦å’Œç´¢å¼•